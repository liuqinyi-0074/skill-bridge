import{r as l,j as e}from"./react-LlGSwrXN.js";import{aO as C,aP as P,aQ as B,aR as g,aS as D}from"./vendor-DrTQk38K.js";const v="#CBD5E1",w="#5E75A4",M=["#E9EEF6","#C9D3E6","#A9BDD9","#89A4C7","#6D8CB6",w];function $({geo:m,values:u,className:k="w-[340px] sm:w-[520px] md:w-[720px] lg:w-[900px]",onSelect:j}){const h=l.useRef(null),[r,E]=l.useState({w:900,h:620});l.useEffect(()=>{if(!h.current)return;const s=h.current,t=new ResizeObserver(n=>{const o=Math.max(320,Math.floor(n[0].contentRect.width)),i=Math.floor(11/16*o);E({w:o,h:i})});return t.observe(s),()=>t.disconnect()},[]);const x=l.useMemo(()=>{const[[s,t],[n,o]]=C(m),a=Math.abs(n-s)>200||Math.abs(o-t)>200?P().reflectY(!0):B().parallels([-18,-36]);return a.fitExtent([[20,20],[r.w-20,r.h-20]],m),a},[m,r.w,r.h]),A=l.useMemo(()=>g(x),[x]),[p,f]=l.useMemo(()=>{const s=Object.values(u).filter(t=>t>0);return s.length?[Math.min(...s),Math.max(...s)]:[0,0]},[u]),R=l.useMemo(()=>D().domain([p,f]).range(M),[p,f]),[d,y]=l.useState(null),N=m.features;return e.jsxs("div",{ref:h,className:`mx-auto relative ${k}`,children:[d&&e.jsxs("div",{className:"hidden sm:block absolute top-0 right-0 z-10 bg-white border border-slate-300 rounded-lg shadow-lg px-4 py-3 min-w-[180px]",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-700",children:d.name}),e.jsxs("div",{className:"text-xs text-slate-500 mt-0.5",children:["Code: ",d.code]}),e.jsx("div",{className:"text-lg font-bold text-primary mt-1",children:d.value.toLocaleString("en-AU")})]}),e.jsxs("svg",{viewBox:`0 0 ${r.w} ${r.h}`,className:"w-full h-auto block",preserveAspectRatio:"xMidYMid meet",role:"img","aria-label":"Australia choropleth map",children:[e.jsx("rect",{width:r.w,height:r.h,fill:"#ffffff"}),e.jsx("g",{children:N.map(s=>{const t=s.properties.code,n=s.properties.name,o=A(s)??"",i=u[t],a=Number.isFinite(i)?i:0,b=a>0&&p!==f?R(a):a>0?w:v;return e.jsx("path",{d:o,fill:b,stroke:"#64748B",strokeWidth:.8,style:{cursor:"pointer"},onClick:()=>{y({code:t,name:n,value:a}),j?.(t,a)},onMouseEnter:c=>c.currentTarget.style.filter="brightness(1.05)",onMouseLeave:c=>c.currentTarget.style.filter="none",role:"button","aria-label":`${n}: ${a.toLocaleString("en-AU")}`,tabIndex:0,onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),y({code:t,name:n,value:a}),j?.(t,a))}},t)})}),e.jsx("g",{children:N.map(s=>{let[t,n]=g(x).centroid(s);if(!Number.isFinite(t)||!Number.isFinite(n)){const[[o,i],[a,b]]=g(x).bounds(s);t=(o+a)/2,n=(i+b)/2}return e.jsx("text",{x:t,y:n,textAnchor:"middle",dominantBaseline:"middle",fontWeight:700,fontSize:12,fill:"#334155",pointerEvents:"none",children:s.properties.code},s.properties.code)})})]}),e.jsxs("div",{className:"mt-3 flex flex-col items-center gap-2 text-sm text-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-slate-600",children:"Legend:"}),e.jsxs("div",{className:"flex h-4 overflow-hidden rounded border border-slate-300",children:[e.jsx("div",{className:"w-6",style:{background:v},title:"0 or missing"}),M.map((s,t)=>e.jsx("div",{className:"w-6",style:{background:s}},t))]})]}),e.jsxs("div",{className:"text-xs text-slate-600",children:[e.jsx("span",{className:"inline-block w-3 h-3 align-middle mr-1 rounded",style:{background:v}}),"0 or missing → gray; ",e.jsx("span",{className:"inline-block w-3 h-3 align-middle mr-1 rounded",style:{background:w}}),"larger value → deeper primary."]}),!d&&e.jsx("div",{className:"mt-1 text-slate-500 text-xs",children:"Click a state to view its employment value."})]})]})}export{$ as default};
