import{d as N,r as g,j as e,T as G,S as X,X as ge,s as I,k as Y,t as Z,R as P,B,c as V,e as ye,f as ke,g as je,h as ee,i as ve,l as Ne,m as te,n as se,o as ne,p as we,q as Ce,v as Se}from"./index-BS3gJMZe.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],re=N("briefcase",Re);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],O=N("calendar",Te);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],De=N("chevron-down",Je);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ae=N("chevron-up",Me);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],oe=N("circle-alert",Ee);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$e=N("circle-question-mark",ze);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],W=N("clock",Ie);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],_e=N("external-link",Le);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Fe=N("graduation-cap",Pe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ie=N("map-pin",He);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ae=N("pen",Ke);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],le=N("plus",Oe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ce=N("trash-2",Ue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],de=N("trending-up",qe);function Be(s){const{value:t,onChange:n,regionOptions:r,SelectQuestion:d,occupationSearch:c,labels:m}=s,i=g.useMemo(()=>({pastJobs:m?.pastJobs??"Past",targetJob:m?.targetJob??"Target",region:m?.region??"Region",edit:m?.edit??"Edit",empty:m?.empty??"None",pastJobsHelp:m?.pastJobsHelp??"You can choose up to 5 past occupations. Stored with their official code.",targetJobHelp:m?.targetJobHelp??"Choose a single target occupation. Stored with its official code.",regionHelp:m?.regionHelp??"Choose one region (English)."}),[m]),[y,x]=g.useState({kind:"idle"}),p=o=>{const u=Array.from(new Map(o.map(f=>[f.id,f])).values()).slice(0,5);n({...t,pastJobs:u})},v=o=>{n({...t,targetJob:o})},l=o=>{n({...t,region:o}),x({kind:"idle"})},j=({items:o})=>o.length===0?e.jsx("span",{className:"text-ink-soft",children:i.empty}):e.jsx("div",{className:"flex flex-wrap gap-1.5",children:o.map(u=>e.jsx("span",{className:"rounded-full border border-border bg-gray-50 px-2 py-0.5 text-xs text-ink",children:u.title||u.id},u.id))}),D=o=>({id:o.code,title:o.title||o.code}),z=o=>({code:o.code,title:o.title||o.code}),R=o=>{const u=[...t.pastJobs,D(o)];p(u)},T=o=>{const u=t.pastJobs.filter(f=>f.id!==o);p(u)},J=o=>{v(z(o))},M=()=>{v(null)},A=({picked:o,onRemove:u,max:f})=>o.length?e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"mb-2 text-xs text-ink-soft",children:["Selected ",f?`(${o.length}/${f})`:`(${o.length})`]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(b=>e.jsxs("span",{className:"group inline-flex items-center gap-1 rounded-full border border-border bg-gray-50 px-2 py-0.5 text-xs text-ink",children:[b.title||b.id,e.jsx("button",{type:"button",onClick:()=>u(b.id),className:"inline-flex h-5 w-5 items-center justify-center rounded-full text-ink-soft hover:bg-gray-200","aria-label":`Remove ${b.title}`,title:"Remove",children:e.jsx(ge,{className:"h-[18px] w-[18px]"})})]},b.id))})]}):null;return e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-xl border border-border p-4 shadow-card",children:[e.jsxs("div",{className:"flex lg:hidden flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(re,{className:"h-4 w-4 shrink-0 text-primary","aria-hidden":"true"}),e.jsxs("span",{className:"text-xs font-semibold shrink-0 text-ink",children:[i.pastJobs,":"]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(j,{items:t.pastJobs})}),e.jsx("button",{type:"button",className:"shrink-0 rounded-lg bg-primary text-ink-invert px-2.5 py-1 text-xs font-semibold hover:bg-primary/90 transition focus:outline-none focus:ring-2 focus:ring-primary/40 focus:ring-offset-1 shadow-sm",onClick:()=>x({kind:"editPast"}),"aria-label":`Edit ${i.pastJobs}`,children:i.edit})]}),e.jsx("div",{className:"h-px bg-border"}),e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(G,{className:"h-4 w-4 shrink-0 text-primary","aria-hidden":"true"}),e.jsxs("span",{className:"text-xs font-semibold shrink-0 text-ink",children:[i.targetJob,":"]}),e.jsx("div",{className:"flex-1 min-w-0 text-sm truncate text-ink",children:t.targetJob?t.targetJob.title:e.jsx("span",{className:"text-ink-soft",children:i.empty})}),e.jsx("button",{type:"button",className:"shrink-0 rounded-lg bg-primary text-ink-invert px-2.5 py-1 text-xs font-semibold hover:bg-primary/90 transition focus:outline-none focus:ring-2 focus:ring-primary/40 focus:ring-offset-1 shadow-sm",onClick:()=>x({kind:"editTarget"}),"aria-label":`Edit ${i.targetJob}`,children:i.edit})]}),e.jsx("div",{className:"h-px bg-border"}),e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(ie,{className:"h-4 w-4 shrink-0 text-primary","aria-hidden":"true"}),e.jsxs("span",{className:"text-xs font-semibold shrink-0 text-ink",children:[i.region,":"]}),e.jsx("div",{className:"flex-1 min-w-0 text-sm truncate text-ink",children:t.region}),e.jsx("button",{type:"button",className:"shrink-0 rounded-lg bg-primary text-ink-invert px-2.5 py-1 text-xs font-semibold hover:bg-primary/90 transition focus:outline-none focus:ring-2 focus:ring-primary/40 focus:ring-offset-1 shadow-sm",onClick:()=>x({kind:"editRegion"}),"aria-label":`Edit ${i.region}`,children:i.edit})]})]}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full table-fixed border-collapse",children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"37.5%"}}),e.jsx("col",{style:{width:"25%"}}),e.jsx("col",{style:{width:"37.5%"}})]}),e.jsx("tbody",{children:e.jsxs("tr",{className:"align-top",children:[e.jsx("td",{className:"pr-4",children:e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(re,{className:"h-4 w-4 shrink-0 text-primary","aria-hidden":"true"}),e.jsxs("span",{className:"text-xs font-semibold shrink-0 text-ink",children:[i.pastJobs,":"]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(j,{items:t.pastJobs})}),e.jsx("button",{type:"button",className:"shrink-0 rounded-lg bg-primary text-ink-invert px-2.5 py-1 text-xs font-semibold hover:bg-primary/90 transition focus:outline-none focus:ring-2 focus:ring-primary/40 focus:ring-offset-1 shadow-sm",onClick:()=>x({kind:"editPast"}),"aria-label":`Edit ${i.pastJobs}`,children:i.edit})]})}),e.jsx("td",{className:"pl-4 pr-4 border-l border-border",children:e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(G,{className:"h-4 w-4 shrink-0 text-primary","aria-hidden":"true"}),e.jsxs("span",{className:"text-xs font-semibold shrink-0 text-ink",children:[i.targetJob,":"]}),e.jsx("div",{className:"flex-1 min-w-0 text-sm truncate text-ink",children:t.targetJob?t.targetJob.title:e.jsx("span",{className:"text-ink-soft",children:i.empty})}),e.jsx("button",{type:"button",className:"shrink-0 rounded-lg bg-primary text-ink-invert px-2.5 py-1 text-xs font-semibold hover:bg-primary/90 transition focus:outline-none focus:ring-2 focus:ring-primary/40 focus:ring-offset-1 shadow-sm",onClick:()=>x({kind:"editTarget"}),"aria-label":`Edit ${i.targetJob}`,children:i.edit})]})}),e.jsx("td",{className:"pl-4 border-l border-border",children:e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(ie,{className:"h-4 w-4 shrink-0 text-primary","aria-hidden":"true"}),e.jsxs("span",{className:"text-xs font-semibold shrink-0 text-ink",children:[i.region,":"]}),e.jsx("div",{className:"flex-1 min-w-0 text-sm truncate text-ink",children:t.region}),e.jsx("button",{type:"button",className:"shrink-0 rounded-lg bg-primary text-ink-invert px-2.5 py-1 text-xs font-semibold hover:bg-primary/90 transition focus:outline-none focus:ring-2 focus:ring-primary/40 focus:ring-offset-1 shadow-sm",onClick:()=>x({kind:"editRegion"}),"aria-label":`Edit ${i.region}`,children:i.edit})]})})]})})]})})]}),y.kind==="editPast"&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-modal w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"text-xl font-heading font-bold text-ink",children:["Edit ",i.pastJobs]}),e.jsx("button",{onClick:()=>x({kind:"idle"}),className:"p-1 hover:bg-gray-100 rounded-lg transition","aria-label":"Close",children:e.jsx("svg",{className:"w-5 h-5 text-ink-soft",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("p",{className:"text-sm text-ink-soft",children:i.pastJobsHelp})]}),e.jsxs("div",{className:"p-6",children:[e.jsx(X,{industryOptions:c.industryOptions,industryCode:c.industryCode,onIndustryChange:c.onIndustryChange,keyword:c.keyword,onKeywordChange:c.onKeywordChange,onSearch:c.onSearch,searchError:c.searchError,results:c.results,isFetching:c.isFetching,isError:c.isError,noResults:c.noResults,pickedIds:t.pastJobs.map(o=>o.id),onAdd:R,onRemove:T,maxSelectable:5,selectedCount:t.pastJobs.length,addDisabledReason:"Limit reached: 5 roles selected."}),e.jsx(A,{picked:t.pastJobs.map(o=>({id:o.id,title:o.title})),onRemove:T,max:5})]})]})}),y.kind==="editTarget"&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-modal w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"text-xl font-heading font-bold text-ink",children:["Edit ",i.targetJob]}),e.jsx("button",{onClick:()=>x({kind:"idle"}),className:"p-1 hover:bg-gray-100 rounded-lg transition","aria-label":"Close",children:e.jsx("svg",{className:"w-5 h-5 text-ink-soft",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("p",{className:"text-sm text-ink-soft",children:i.targetJobHelp})]}),e.jsxs("div",{className:"p-6",children:[e.jsx(X,{industryOptions:c.industryOptions,industryCode:c.industryCode,onIndustryChange:c.onIndustryChange,keyword:c.keyword,onKeywordChange:c.onKeywordChange,onSearch:c.onSearch,searchError:c.searchError,results:c.results,isFetching:c.isFetching,isError:c.isError,noResults:c.noResults,pickedIds:t.targetJob?[t.targetJob.code]:[],onAdd:J,onRemove:()=>M(),maxSelectable:1,selectedCount:t.targetJob?1:0,addDisabledReason:"You can only choose one target occupation."}),e.jsx(A,{picked:t.targetJob?[{id:t.targetJob.code,title:t.targetJob.title}]:[],onRemove:()=>M(),max:1})]})]})}),e.jsx(d,{title:`Edit ${i.region}`,open:y.kind==="editRegion",options:r,value:t.region??null,onClose:()=>x({kind:"idle"}),onSave:l,helperText:i.regionHelp})]})}const ue=()=>`skill-${Date.now()}-${Math.random().toString(36).slice(2,10)}`,K=s=>{if(!s)return;const t=new Date(s);return Number.isNaN(t.getTime())?void 0:t},me=s=>{const t=K(s);return t?t.toLocaleDateString():"Not scheduled"},Ve=s=>(s??[]).map(t=>({...t,id:t.id??ue()})),We=({initialSkills:s,onChange:t})=>{const[n,r]=g.useState(()=>Ve(s)),[d,c]=g.useState(!1),[m,i]=g.useState(!1),[y,x]=g.useState(null),[p,v]=g.useState(!1),[l,j]=g.useState({abilityType:"",category:"",skill:"",code:"",startDate:"",endDate:""}),D=a=>{r(a),t?.(a)},z=a=>a?a==="skill"?["content","process","crossFunctional"]:a==="knowledge"?["management","production","technical","science","health","education","culture","public","communication"]:a==="tech"?["business","productivity","development","database","education","industry","network","system","security","communication","management"]:[]:[],R=(a,k)=>{if(!a||!k)return[];if(a==="skill"){if(k==="content")return I.content;if(k==="process")return I.process;if(k==="crossFunctional")return[...I.crossFunctional.resourceManagement,...I.crossFunctional.technical]}else{if(a==="knowledge")return Y[k]||[];if(a==="tech")return Z[k]||[]}return[]},T=(a,k)=>{const h=K(a),w=K(k);if(!h||!w)return{status:"not-started",label:"Not scheduled",color:"bg-gray-100 text-ink-soft border-border",icon:W};const C=new Date;return C<h?{status:"not-started",label:"Not Started",color:"bg-gray-100 text-ink-soft border-border",icon:W}:C>=h&&C<=w?{status:"in-progress",label:"In Progress",color:"bg-primary/10 text-primary border-primary",icon:de}:{status:"completed",label:"Date Passed",color:"bg-accent/20 text-black border-accent",icon:oe}},J=g.useMemo(()=>{const a=n.length,k=n.reduce((C,E)=>{const fe=K(E.startDate),be=K(E.endDate);return C+(!fe||!be?1:0)},0);let h=0,w=0;for(const C of n){const E=T(C.startDate,C.endDate).status;E==="in-progress"&&(h+=1),E==="completed"&&(w+=1)}return{total:a,notScheduled:k,inProgress:h,datePassed:w}},[n]),M=()=>{if(l.abilityType&&l.category&&l.skill&&l.startDate&&l.endDate){const a={id:ue(),abilityType:l.abilityType,category:l.category,skill:l.skill,code:l.code?.trim()?l.code.trim():void 0,startDate:l.startDate||void 0,endDate:l.endDate||void 0};D([...n,a]),f(),c(!1)}},A=()=>{y&&l.abilityType&&l.category&&l.skill&&l.startDate&&l.endDate&&(D(n.map(a=>a.id===y.id?{...a,abilityType:l.abilityType,category:l.category,skill:l.skill,code:l.code?.trim()?l.code.trim():void 0,startDate:l.startDate||void 0,endDate:l.endDate||void 0}:a)),f(),i(!1),x(null))},o=a=>{D(n.filter(k=>k.id!==a))},u=a=>{x(a),j({abilityType:a.abilityType,category:a.category,skill:a.skill,code:a.code||"",startDate:a.startDate??"",endDate:a.endDate??""}),i(!0)},f=()=>{j({abilityType:"",category:"",skill:"",code:"",startDate:"",endDate:""})},b=({show:a,title:k,children:h})=>a?e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 p-3 sm:p-4",children:e.jsx("div",{className:`bg-white rounded-xl shadow-modal w-full max-h-[92vh] overflow-y-auto
                        max-w-sm sm:max-w-md md:max-w-lg lg:max-w-xl xl:max-w-2xl`,children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-heading font-bold text-ink mb-3 sm:mb-4",children:k}),h]})})}):null,S=({onSubmit:a,submitLabel:k})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink mb-2",children:"Ability Type"}),e.jsxs("select",{value:l.abilityType,onChange:h=>j({...l,abilityType:h.target.value,category:"",skill:"",code:""}),className:"w-full p-2.5 sm:p-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/40 text-ink",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"skill",children:"Skill"}),e.jsx("option",{value:"knowledge",children:"Knowledge"}),e.jsx("option",{value:"tech",children:"Tech Skill"})]})]}),l.abilityType&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink mb-2",children:"Category"}),e.jsxs("select",{value:l.category,onChange:h=>j({...l,category:h.target.value,skill:"",code:""}),className:"w-full p-2.5 sm:p-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/40 text-ink",children:[e.jsx("option",{value:"",children:"Select Category"}),z(l.abilityType).map(h=>e.jsx("option",{value:h,children:h.charAt(0).toUpperCase()+h.slice(1)},h))]})]}),l.category&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink mb-2",children:"Skill"}),e.jsxs("select",{value:l.skill,onChange:h=>{const w=R(l.abilityType,l.category).find(C=>C.name===h.target.value);j({...l,skill:h.target.value,code:w?.code||""})},className:"w-full p-2.5 sm:p-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/40 text-ink",children:[e.jsx("option",{value:"",children:"Select Skill"}),R(l.abilityType,l.category).map(h=>e.jsx("option",{value:h.name,children:h.name},h.code||h.name))]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:l.startDate,onChange:h=>j({...l,startDate:h.target.value}),className:"w-full p-2.5 sm:p-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/40 text-ink"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:l.endDate,onChange:h=>j({...l,endDate:h.target.value}),className:"w-full p-2.5 sm:p-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/40 text-ink"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-2 sm:pt-4",children:[e.jsx("button",{onClick:a,className:"w-full sm:flex-1 bg-primary text-ink-invert py-2.5 sm:py-3 px-4 rounded-full font-semibold hover:bg-primary/90 transition shadow-sm focus:outline-none focus:ring-2 focus:ring-primary/40",children:k}),e.jsx("button",{onClick:()=>{f(),c(!1),i(!1),x(null)},className:"w-full sm:flex-1 bg-transparent text-ink border border-border py-2.5 sm:py-3 px-4 rounded-full font-semibold hover:bg-black/10 transition focus:outline-none focus:ring-2 focus:ring-black/20",children:"Cancel"})]})]});return e.jsx("div",{className:"bg-white p-4 sm:p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 sm:gap-4 items-start sm:items-center mb-6 sm:mb-8",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-heading font-bold text-ink",children:"Skill Roadmap"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.length>0&&e.jsxs("button",{onClick:()=>v(a=>!a),className:"flex items-center gap-1.5 sm:gap-2 border border-border text-ink px-3 sm:px-4 py-1.5 sm:py-2 rounded-full hover:bg-black/5 transition shadow-sm focus:outline-none focus:ring-2 focus:ring-black/20 text-sm sm:text-base",title:p?"Show all":"Show less",children:[p?e.jsx(De,{size:18}):e.jsx(Ae,{size:18}),p?"Show all":"Show less"]}),e.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-1.5 sm:gap-2 bg-primary text-ink-invert px-4 sm:px-6 py-2 sm:py-3 rounded-full hover:bg-primary/90 transition shadow-card font-semibold focus:outline-none focus:ring-2 focus:ring-primary/40 text-sm sm:text-base",children:[e.jsx(le,{size:18,className:"sm:hidden"}),e.jsx(le,{size:20,className:"hidden sm:block"}),"Add Skill"]})]})]}),p&&n.length>0?e.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-border p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-heading font-semibold text-ink mb-3 sm:mb-4",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"rounded-lg border border-border p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-ink-soft mb-1",children:"Total"}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-ink",children:J.total})]}),e.jsxs("div",{className:"rounded-lg border border-border p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm text-ink-soft mb-1",children:[e.jsx(oe,{size:14}),e.jsx("span",{children:"Date Passed"})]}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-ink",children:J.datePassed})]}),e.jsxs("div",{className:"rounded-lg border border-border p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm text-ink-soft mb-1",children:[e.jsx(W,{size:14}),e.jsx("span",{children:"Not Scheduled"})]}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-ink",children:J.notScheduled})]}),e.jsxs("div",{className:"rounded-lg border border-border p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm text-ink-soft mb-1",children:[e.jsx(de,{size:14}),e.jsx("span",{children:"In Progress"})]}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-ink",children:J.inProgress})]})]})]}):e.jsx(e.Fragment,{children:n.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-border p-8 sm:p-12 text-center",children:[e.jsx(O,{size:56,className:"mx-auto mb-3 text-ink-soft/40 sm:hidden"}),e.jsx(O,{size:64,className:"mx-auto mb-4 text-ink-soft/40 hidden sm:block"}),e.jsx("h2",{className:"text-lg sm:text-2xl font-heading font-semibold text-ink mb-2",children:"Not selected yet"}),e.jsx("p",{className:"text-ink-soft mb-4 sm:mb-6 text-sm sm:text-base",children:"Start building your learning roadmap by adding your first skill"}),e.jsx("button",{onClick:()=>c(!0),className:"bg-primary text-ink-invert px-5 sm:px-6 py-2 sm:py-2.5 rounded-full hover:bg-primary/90 transition font-semibold shadow-sm focus:outline-none focus:ring-2 focus:ring-primary/40 text-sm sm:text-base",children:"Add Your First Skill"})]}):e.jsx("div",{className:"grid gap-3 sm:gap-4 grid-cols-1",children:n.map(a=>{const k=T(a.startDate,a.endDate),h=k.icon;return e.jsx("div",{className:"bg-white rounded-xl shadow-card border border-border p-4 sm:p-5 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-heading font-bold text-ink leading-snug whitespace-normal break-words",children:a.skill}),e.jsxs("div",{className:"mt-1.5 flex flex-wrap items-center gap-2 text-xs sm:text-sm text-ink-soft",children:[e.jsx("span",{className:"capitalize font-medium",children:a.abilityType}),e.jsx("span",{children:"â†’"}),e.jsx("span",{className:"capitalize",children:a.category}),e.jsxs("span",{className:`ml-2 inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] sm:text-xs font-medium border ${k.color}`,children:[e.jsx(h,{size:12}),k.label]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(O,{size:14,className:"opacity-70"}),e.jsxs("span",{children:["Start: ",me(a.startDate)]})]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(O,{size:14,className:"opacity-70"}),e.jsxs("span",{children:["End: ",me(a.endDate)]})]})]})]}),e.jsxs("div",{className:"flex gap-1.5 sm:gap-2",children:[e.jsxs("button",{onClick:()=>u(a),className:"p-1.5 sm:p-2 text-primary hover:bg-primary/10 rounded-lg transition focus:outline-none focus:ring-2 focus:ring-primary/40",title:"Edit skill",children:[e.jsx(ae,{size:18,className:"sm:hidden"}),e.jsx(ae,{size:20,className:"hidden sm:block"})]}),e.jsxs("button",{onClick:()=>o(a.id),className:"p-1.5 sm:p-2 text-red-600 hover:bg-red-50 rounded-lg transition focus:outline-none focus:ring-2 focus:ring-red-300",title:"Remove skill",children:[e.jsx(ce,{size:18,className:"sm:hidden"}),e.jsx(ce,{size:20,className:"hidden sm:block"})]})]})]})},a.id)})})}),e.jsx(b,{show:d,onClose:()=>c(!1),title:"Add New Skill",children:e.jsx(S,{onSubmit:M,submitLabel:"Add Skill"})}),e.jsx(b,{show:m,onClose:()=>i(!1),title:"Edit Skill",children:e.jsx(S,{onSubmit:A,submitLabel:"Update Skill"})})]})})};function Qe({mode:s="button",label:t="Remove",title:n="Confirm remove",message:r="Are you sure you want to delete this? This action cannot be undone. You can add it back manually later.",confirmText:d="Confirm",cancelText:c="Cancel",disabled:m,onConfirm:i,className:y}){const[x,p]=P.useState(!1),v=()=>p(!0),l=()=>p(!1),j=s==="button"?e.jsx(B,{variant:"primary",size:"md",onClick:v,disabled:m,className:y,children:t}):e.jsx(B,{variant:"primary",size:"sm",onClick:v,disabled:m,className:`h-11 w-11 rounded-full p-0 ${y??""}`,"aria-label":t,title:t,children:e.jsx("svg",{viewBox:"0 0 24 24",role:"img","aria-label":"Remove",fill:"currentColor",className:"h-[20px] w-[20px] md:h-[22px] md:w-[22px] shrink-0",children:e.jsx("path",{d:"M9 3h6a1 1 0 0 1 1 1v1h4v2h-1v12a3 3 0 0 1-3 3H8a3 3 0 0 1-3-3V7H4V5h4V4a1 1 0 0 1 1-1Zm1 2v0h4V5h-4ZM7 7v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V7H7Zm4 3h2v8h-2v-8Z"})})});return e.jsxs(e.Fragment,{children:[j,x&&e.jsx(Ye,{title:n,message:r,confirmText:d,cancelText:c,onConfirm:async()=>{await i(),l()},onCancel:l})]})}function Ye({title:s,message:t,confirmText:n,cancelText:r,onConfirm:d,onCancel:c}){const m=P.useRef(null),i=P.useRef(null),y=P.useCallback(()=>{const p=m.current;if(!p)return[];const v=["button:not([disabled])","a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","[tabindex]:not([tabindex='-1'])"].join(",");return Array.from(p.querySelectorAll(v)).filter(j=>!j.hasAttribute("disabled")&&j.offsetParent!==null)},[]);P.useEffect(()=>{i.current=document.activeElement;const p=document.body.style.overflow;return document.body.style.overflow="hidden",(m.current?.querySelector("[data-autofocus]")??y()[0]??null)?.focus(),()=>{document.body.style.overflow=p,i.current?.focus()}},[y]),P.useEffect(()=>{const p=v=>{v.key==="Escape"&&c()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[c]);const x=p=>{if(p.key!=="Tab")return;const v=y();if(v.length===0)return;const l=v[0],j=v[v.length-1];p.shiftKey?document.activeElement===l&&(p.preventDefault(),j.focus()):document.activeElement===j&&(p.preventDefault(),l.focus())};return e.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"confirm-remove-title",className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/40 backdrop-blur-sm",onClick:c,onKeyDown:x,children:e.jsxs("div",{ref:m,onClick:p=>p.stopPropagation(),className:"w-[min(520px,90vw)] rounded-2xl bg-white p-6 shadow-modal focus:outline-none",children:[e.jsx("h2",{id:"confirm-remove-title",className:"text-lg font-semibold text-ink",children:s}),e.jsx("p",{className:"mt-3 text-sm leading-relaxed text-ink-soft",children:t}),e.jsxs("div",{className:"mt-5 flex justify-end gap-3",children:[e.jsx(B,{variant:"ghost",size:"md",onClick:c,className:"min-w-[90px]","aria-label":r,"data-autofocus":!0,children:r}),e.jsx(B,{variant:"primary",size:"md",onClick:d,className:"min-w-[90px]","aria-label":n,children:n})]})]})})}function Ze(s){return/^https?:\/\//i.test(s)?s:`https://${s}`}const Ge=({items:s,title:t="Training advice",ariaLabel:n="Training advice list",onSelect:r,onRemove:d,maxVisible:c})=>{const m=typeof c=="number"?s.slice(0,Math.max(0,c)):s;return e.jsxs("section",{"aria-label":n,children:[e.jsx("header",{className:"mb-3",children:e.jsx("h3",{className:"text-base font-semibold text-ink",children:t})}),m.length===0?e.jsx("div",{className:"rounded-xl border border-border p-6 text-sm text-ink-soft",children:"No training available"}):e.jsx("ul",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3",children:m.map(i=>{const y=`${i.code}|${i.url}`,x=Ze(i.url);return e.jsx("li",{children:e.jsxs("article",{className:"group relative h-full rounded-xl border border-border bg-white p-4 hover:shadow-card transition",children:[d&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Qe,{mode:"circle",title:"Remove training advice",message:`Are you sure you want to remove "${i.title}"? This action cannot be undone.`,confirmText:"Remove",cancelText:"Cancel",onConfirm:()=>d(i)})}),e.jsxs("div",{className:"mb-2 flex items-start gap-3",children:[e.jsx("div",{className:"shrink-0 mt-1",children:e.jsx(Fe,{size:20,className:"text-primary"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h4",{className:"line-clamp-2 text-sm font-medium text-ink pr-8",children:i.title})})]}),e.jsx("div",{className:"mb-3 ml-8",children:e.jsx("span",{className:"inline-block rounded-full border border-border bg-gray-50 px-2.5 py-0.5 text-[11px] text-ink-soft font-medium",children:i.code})}),e.jsx("div",{className:"mt-3 ml-8",children:e.jsxs("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 rounded-full border border-primary bg-white px-4 py-1.5 text-sm text-primary font-medium hover:bg-primary hover:text-ink-invert transition focus:outline-none focus:ring-2 focus:ring-primary/40","aria-label":`Open ${i.title} in new tab`,onClick:()=>r?.(i),children:[e.jsx("span",{children:"Visit course"}),e.jsx(_e,{size:14})]})})]})},y)})})]})};function Xe({text:s,placement:t="top",trigger:n,openOn:r="hover",className:d,hoverDelay:c=80}){const[m,i]=g.useState(!1),y=g.useRef(null),x=g.useRef(null),p=g.useRef(null),v=g.useRef(null),l=g.useId();g.useEffect(()=>()=>{y.current&&window.clearTimeout(y.current)},[]),g.useEffect(()=>{if(!m)return;const u=f=>{const b=f.target;x.current?.contains(b)||i(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[m]),g.useEffect(()=>{if(!m)return;const u=f=>{f.key==="Escape"&&(i(!1),p.current?.focus())};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[m]);const j=()=>{m||(y.current&&window.clearTimeout(y.current),y.current=window.setTimeout(()=>i(!0),c))},D=()=>{y.current&&window.clearTimeout(y.current),i(!1)},z=()=>{(r==="click"||r==="both")&&i(u=>!u)},R=()=>{(r==="hover"||r==="both")&&j()},T=()=>{(r==="hover"||r==="both")&&D()},J=()=>{(r==="hover"||r==="both")&&i(!0)},M=u=>{x.current?.contains(u.relatedTarget)||i(!1)},A={top:"bottom-full left-1/2 -translate-x-1/2 mb-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2",right:"left-full top-1/2 -translate-y-1/2 ml-2"}[t],o={top:"top-full left-1/2 -translate-x-1/2",bottom:"bottom-full left-1/2 -translate-x-1/2",left:"left-full top-1/2 -translate-y-1/2",right:"right-full top-1/2 -translate-y-1/2"}[t];return e.jsxs("span",{ref:x,className:V("relative inline-flex",d),onMouseEnter:R,onMouseLeave:T,onBlur:M,children:[e.jsx("button",{ref:p,type:"button","aria-describedby":m?l:void 0,"aria-expanded":m,onClick:z,onFocus:J,className:`inline-flex h-6 w-6 items-center justify-center rounded-full bg-primary text-white shadow-sm\r
                   hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary/40`,title:"Help",children:n??e.jsx($e,{size:14})}),m&&e.jsxs("div",{ref:v,id:l,role:"tooltip",className:V("absolute z-[100] max-w-xs rounded-md border border-gray-200 bg-white px-3 py-2 text-xs leading-relaxed text-ink shadow-lg","animate-in fade-in-0 zoom-in-95",A),children:[s,e.jsx("span",{className:V("pointer-events-none absolute h-2 w-2 rotate-45 border border-gray-200 bg-white",t==="top"&&"border-t-0 border-l-0",t==="bottom"&&"border-b-0 border-r-0",t==="left"&&"border-l-0 border-b-0",t==="right"&&"border-r-0 border-t-0",o)})]})]})}const et=s=>`https://training.gov.au/training/details/${encodeURIComponent(s)}`,tt=["New South Wales","Victoria","Queensland","Western Australia","South Australia","Tasmania","Northern Territory","Australian Capital Territory"],U=s=>{if(!Array.isArray(s))return[];const t=new Set,n=[];return s.forEach(r=>{if(!r)return;const d=(typeof r=="string"?r:r.id??"").trim();if(!d||t.has(d))return;t.add(d);const c=typeof r=="string"?r:r.title||d;n.push({id:d,title:c})}),n},Q=s=>{if(!s)return null;if(typeof s=="string"){const n=s.trim();return n?{code:n,title:s}:null}const t=(s.code??"").trim();return t?{code:t,title:s.title||t}:null},L=s=>typeof s=="string"?s:"",xe=s=>{const t=L(s.name),n=typeof s.code=="string"?s.code:"";return!t&&!n?null:`${s.aType}:${n||t.toLowerCase()}`},he=s=>{const t=L(s.skill),n=typeof s.code=="string"?s.code:"";return!t&&!n?null:`${s.abilityType}:${n||t.toLowerCase()}`},pe=s=>{const t=L(s.name),n=s.code??t,r=n?encodeURIComponent(n):`unnamed-${s.aType}`;return`${s.aType}:${r}`},$=s=>{const t=new Set,n=[];for(const r of s){const d=xe(r),c=L(r.name);!d||!c||t.has(d)||(t.add(d),n.push({...r,name:c}))}return n},q=s=>{if(!s)return[];const t=(n,r)=>(n??[]).filter(d=>!!d).map(d=>({name:d,aType:r}));return[...t(s.skill,"skill"),...t(s.knowledge,"knowledge"),...t(s.tech,"tech")]},_=(s,t)=>{if(!s)return!1;if(t.code&&s.code&&s.code===t.code)return!0;const n=L(s.name),r=L(t.name);return!!(n&&r&&n.toLowerCase()===r.toLowerCase())},st=s=>{if(s.aType==="skill"){if((I.content??[]).some(n=>_(n,s)))return"content";if((I.process??[]).some(n=>_(n,s)))return"process";const t=I.crossFunctional??{resourceManagement:[],technical:[]};return(t.resourceManagement??[]).some(n=>_(n,s))||(t.technical??[]).some(n=>_(n,s))?"crossFunctional":"content"}if(s.aType==="knowledge"){for(const t of Object.keys(Y))if((Y[t]??[]).some(r=>_(r,s)))return t;return"management"}if(s.aType==="tech"){for(const t of Object.keys(Z))if((Z[t]??[]).some(r=>_(r,s)))return t;return"business"}return"content"},F=s=>s.map((t,n)=>{const r=st(t);return{id:`${pe(t)}:${n}`,abilityType:t.aType,category:r,skill:L(t.name),code:typeof t.code=="string"?t.code:void 0,startDate:void 0,endDate:void 0}}),H=(s,t)=>{const n=t.map(r=>pe(r));return`${s}:${n.join("|")||"empty"}`},nt=s=>{const t=new Set,n=[];for(const r of s){const d=he(r);d&&(t.has(d)||(t.add(d),n.push(r)))}return n},rt=({title:s,open:t,options:n,value:r,onClose:d,onSave:c,helperText:m})=>{const[i,y]=g.useState(r);return t?e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-modal max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-heading font-bold text-ink",children:s}),e.jsx("button",{onClick:d,className:"p-1 hover:bg-gray-100 rounded-lg transition","aria-label":"Close",children:e.jsx("svg",{className:"w-5 h-5 text-ink-soft",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),m&&e.jsx("p",{className:"text-sm text-ink-soft mb-4",children:m}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto mb-4",children:n.map(x=>e.jsx("button",{onClick:()=>y(x),className:"w-full text-left p-3 border border-border rounded-lg hover:bg-gray-50 transition",style:{borderColor:i===x?"#5E75A4":"#e2e8f0",backgroundColor:i===x?"#5E75A4":"white",color:i===x?"white":"#0f172a"},children:x},x))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{i&&(c(i),d())},className:"flex-1 py-2 px-4 rounded-full font-semibold bg-primary text-ink-invert hover:bg-primary/90 transition",children:"Save"}),e.jsx("button",{onClick:d,className:"flex-1 py-2 px-4 rounded-full font-semibold border border-border text-ink hover:bg-gray-50 transition",children:"Cancel"})]})]})}):null};function it(){const s=ye(),{state:t}=ke(),n=t??void 0,r=je(o=>o.analyzer),d=n?.notice;g.useEffect(()=>{n&&(!r.chosenRoles?.length&&n.roles?.length&&s(ee(U(n?.roles))),!r.chosenAbilities?.length&&n.abilities?.length&&s(ve(n.abilities)),(!r.interestedIndustryCodes||r.interestedIndustryCodes.length===0)&&n.industries?.length&&s(Ne(n.industries)),!r.preferredRegion&&n.region&&s(te(n.region)),!r.selectedJob&&n.selectedJob&&s(se(n.selectedJob)),!r.trainingAdvice&&n.training&&s(ne(n.training)))},[]);const c=g.useMemo(()=>{const o=$(r.chosenAbilities??[]);if(o.length>0){const a=H("redux",o);return{abilities:o,key:a,items:F(o)}}const u=Array.isArray(n?.abilities)?n.abilities:[],f=$(u);if(f.length>0){const a=H("route",f);return{abilities:f,key:a,items:F(f)}}const b=$(q(r.selectedJobUnmatched));if(b.length>0){const a=H("redux-unmatched",b);return{abilities:b,key:a,items:F(b)}}const S=$(q(n?.unmatched??null));if(S.length>0){const a=H("route-unmatched",S);return{abilities:S,key:a,items:F(S)}}return{abilities:[],key:"none",items:[]}},[r.chosenAbilities,r.selectedJobUnmatched,n]),m=g.useMemo(()=>{const o=$(q(r.selectedJobUnmatched)),u=$(q(n?.unmatched??null)),f=new Set(c.items.map(w=>he(w)).filter(w=>!!w)),b=[],S=w=>{for(const C of w){const E=xe(C);E&&(f.has(E)||b.push(C))}};S(o),S(u);const a=$([...c.abilities,...b]),k=nt([...c.items,...F(b)]);return{key:H("merged",a),items:k}},[c,r.selectedJobUnmatched,n?.unmatched]),i=g.useMemo(()=>{const o=U(r.chosenRoles),u=Q(r.selectedJob),f=r.preferredRegion||"",b=U(n?.roles),S=Q(n?.selectedJob),a=n?.region||"";return{pastJobs:o.length>0?o:b,targetJob:u??S,region:f||a}},[r,n]),y=o=>{const u=U(o.pastJobs);s(ee(u)),s(se(Q(o.targetJob))),s(te(o.region))},x=g.useMemo(()=>{const o=r.trainingAdvice?.courses??[],u=n?.training?.courses??[];return(o.length?o:u).map(b=>({title:b.name||b.title||"",code:b.id||b.code||"",url:b.url||et(b.id||b.code||"")}))},[r.trainingAdvice,n]),[p,v]=g.useState(""),[l,j]=g.useState(""),[D,z]=g.useState(null),{data:R,isFetching:T,isError:J}=we(D),M=g.useMemo(()=>{if(Array.isArray(R))return R;const o=R?.results;return Array.isArray(o)?o:[]},[R]),A={industryOptions:Ce.map(o=>({value:o.value,label:o.label})),industryCode:p,onIndustryChange:v,keyword:l,onKeywordChange:j,onSearch:()=>{const o=Se(p)??"";(o||l.trim())&&z({industry:o,keyword:l.trim(),limit:20})},results:M,isFetching:T,isError:J,noResults:!T&&M.length===0};return e.jsx("div",{className:"min-h-screen bg-white",children:e.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-heading font-bold text-ink mb-2",children:"Profile"}),e.jsx("p",{className:"text-ink-soft",children:"Manage your career journey and skills roadmap"}),d&&e.jsx("div",{className:"mt-4 rounded-lg border border-green-300 bg-green-50 p-4 text-sm text-green-800",children:d})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-heading font-bold text-ink mb-4",children:"Career Intent"}),e.jsx(Be,{value:i,onChange:y,regionOptions:tt,SelectQuestion:rt,occupationSearch:A})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-heading font-bold text-ink",children:"Skill Roadmap"}),e.jsx(Xe,{placement:"left",openOn:"both",text:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-primary mb-1",children:"Heads-up"}),e.jsxs("p",{children:["If you run the analyzer again, this list will ",e.jsx("strong",{children:"only add new abilities"})," it finds. It will ",e.jsx("strong",{children:"not remove"})," any existing items here."]})]})})]}),e.jsxs("div",{className:"rounded-xl border border-border p-6 bg-white shadow-card",children:[e.jsx("p",{className:"text-sm text-ink-soft mb-4",children:"Plan your skill development journey with timelines for each skill you want to acquire."}),e.jsx(We,{initialSkills:m.items},m.key)]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-heading font-bold text-ink mb-4",children:"Training Advice"}),e.jsx("div",{className:"rounded-xl border border-border p-6 bg-white shadow-card",children:e.jsx(Ge,{items:x,title:"",onRemove:o=>{const u=x.filter(f=>f.code!==o.code);s(ne({occupation:r.trainingAdvice?.occupation||{code:"",title:""},courses:u.map(f=>({id:f.code,name:f.title,url:f.url}))}))}})})]})]})]})})}export{it as default};
