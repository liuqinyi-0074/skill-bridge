import{r as e,j as l}from"./react-LlGSwrXN.js";import{c as b,aN as S}from"./vendor-DrTQk38K.js";function M({text:v,placement:u="top",trigger:y,openOn:a="hover",className:R,hoverDelay:k=80}){const[r,o]=e.useState(!1),[c,g]=e.useState(u),n=e.useRef(null),p=e.useRef(null),f=e.useRef(null),x=e.useRef(null),d=e.useRef(!1),h=e.useId();e.useEffect(()=>{if(!r||!x.current||!f.current){d.current=!1;return}if(d.current)return;const t=requestAnimationFrame(()=>{const s=x.current,w=f.current;if(!s||!w)return;const m=s.getBoundingClientRect();let i=u;m.right>window.innerWidth-10?i="left":m.left<10&&(i="right"),m.bottom>window.innerHeight-10?i="top":m.top<10&&(i="bottom"),i!==c&&g(i),d.current=!0});return()=>cancelAnimationFrame(t)},[r]),e.useEffect(()=>{g(u),d.current=!1},[u]),e.useEffect(()=>()=>{n.current&&window.clearTimeout(n.current)},[]),e.useEffect(()=>{if(!r)return;const t=s=>{const w=s.target;p.current?.contains(w)||o(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[r]),e.useEffect(()=>{if(!r)return;const t=s=>{s.key==="Escape"&&(o(!1),f.current?.focus())};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[r]);const E=()=>{a!=="click"&&(n.current&&window.clearTimeout(n.current),n.current=window.setTimeout(()=>o(!0),k))},j=()=>{a!=="click"&&(n.current&&(window.clearTimeout(n.current),n.current=null),o(!1))},T=()=>{a!=="hover"&&o(t=>!t)},N=()=>{a!=="click"&&o(!0)},A=t=>{a!=="click"&&(p.current?.contains(t.relatedTarget)||o(!1))},C=()=>"w-[90vw] max-w-[280px] sm:max-w-[320px] md:max-w-sm lg:max-w-md",L={top:"bottom-full left-1/2 -translate-x-1/2 mb-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2",right:"left-full top-1/2 -translate-y-1/2 ml-2"}[c],B={top:"top-full left-1/2 -translate-x-1/2 -mt-[1px]",bottom:"bottom-full left-1/2 -translate-x-1/2 -mb-[1px]",left:"left-full top-1/2 -translate-y-1/2 -ml-[1px]",right:"right-full top-1/2 -translate-y-1/2 -mr-[1px]"}[c],H={top:"border-t-0 border-l-0",bottom:"border-b-0 border-r-0",left:"border-l-0 border-b-0",right:"border-r-0 border-t-0"}[c];return l.jsxs("span",{ref:p,className:b("relative inline-flex",R),onMouseEnter:E,onMouseLeave:j,onBlur:A,children:[l.jsx("button",{ref:f,type:"button","aria-describedby":r?h:void 0,"aria-expanded":r,"aria-label":"Show help information",onClick:T,onFocus:N,className:`inline-flex h-5 w-5 sm:h-6 sm:w-6 items-center justify-center rounded-full \r
                   bg-primary text-white shadow-sm transition-all duration-200\r
                   hover:bg-primary/90 hover:shadow-md\r
                   focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary/40\r
                   active:scale-95`,title:"Help",children:y??l.jsx(S,{size:14})}),r&&l.jsxs("div",{ref:x,id:h,role:"tooltip",className:b("absolute z-[9999]",C(),"rounded-lg border border-gray-200 bg-white shadow-xl","px-3 py-2.5 sm:px-3.5 sm:py-3","text-xs sm:text-sm leading-relaxed text-ink","break-words hyphens-auto","animate-in fade-in-0 zoom-in-95 duration-200",L),children:[l.jsx("div",{className:"space-y-1",children:v}),l.jsx("span",{className:b("pointer-events-none absolute h-2 w-2 rotate-45","border border-gray-200 bg-white",H,B),"aria-hidden":"true"})]})]})}export{M as H};
