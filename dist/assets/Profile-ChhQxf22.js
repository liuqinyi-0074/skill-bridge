import{r as u,j as e,d as V}from"./react-LlGSwrXN.js";import{e as Re}from"./redux-BBHHYmT8.js";import{S as fe,B as w,s as Z,k as Je,t as Pe,g as Ie,e as Fe,f as be,h as Le,j as Oe,l as ye,m as je,n as de,o as Me,b as $e,i as Ve,T as Be,d as He,q as Ke}from"./index-C5d6JHCt.js";import{H as X}from"./HelpToggleSmall-DHtIf1Xf.js";import{au as Ye,ae as Ue,av as We,ac as pe,aw as me,ax as _e,ay as qe,az as ve,aA as ke,aB as ue,aC as Ne,aD as xe,as as we,aE as ee,aF as Ge,aG as Se,aH as Ce,aI as Qe,aJ as Ze,aK as Te,aL as Xe,aM as et,a8 as tt,ag as st}from"./vendor-DrTQk38K.js";import{u as rt}from"./tanstack-BEt7DztD.js";function at(t){const{value:s,onChange:i,regionOptions:o,SelectQuestion:l,occupationSearch:a,labels:h}=t,c=u.useMemo(()=>({subtitle:h?.subtitle??"Your career background and goals",pastJobs:h?.pastJobs??"Past Job",targetJob:h?.targetJob??"Target Job",region:h?.region??"Target Region",edit:h?.edit??"Edit",empty:h?.empty??"None",pastJobsHelp:h?.pastJobsHelp??"You can choose up to 5 past occupations. Stored with their official code.",targetJobHelp:h?.targetJobHelp??"Choose a single target occupation. Stored with its official code.",regionHelp:h?.regionHelp??"Choose one region (English)."}),[h]),[m,p]=u.useState({kind:"idle"}),f=r=>({id:r.code,title:r.title||r.code}),j=r=>{const v=Array.from(new Map(r.map(g=>[g.id,g])).values()).slice(0,5);i({...s,pastJobs:v})},k=r=>{i({...s,targetJob:r})},S=r=>{i({...s,region:r}),p({kind:"idle"})},D=r=>j([...s.pastJobs,f(r)]),R=r=>j(s.pastJobs.filter(v=>v.id!==r)),y=r=>k(f(r)),C=()=>k(null),E=({items:r})=>r.length===0?e.jsx("span",{className:"text-ink-soft",children:c.empty}):e.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(v=>e.jsx("span",{className:"rounded-full border border-border bg-gray-50 px-2.5 py-1 text-xs text-ink",children:v.title||v.id},v.id))}),I=({picked:r,onRemove:v,max:g})=>r.length?e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"mb-2 text-xs text-ink-soft",children:["Selected ",g?`(${r.length}/${g})`:`(${r.length})`]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(A=>e.jsxs("span",{className:"group inline-flex items-center gap-1 rounded-full border border-border bg-gray-50 px-2 py-0.5 text-xs text-ink",children:[A.title||A.id,e.jsx("button",{type:"button",onClick:()=>v(A.id),className:"inline-flex h-5 w-5 items-center justify-center rounded-full text-ink-soft hover:bg-gray-200","aria-label":`Remove ${A.title}`,title:"Remove",children:e.jsx(pe,{className:"h-[18px] w-[18px]"})})]},A.id))})]}):null;return e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-2xl border border-border bg-white p-6 shadow-card",children:[e.jsx("p",{className:"mt-1 text-sm text-ink-soft",children:c.subtitle}),e.jsx("hr",{className:"my-5 border-border"}),e.jsxs("div",{className:"flex items-start gap-3 py-3",children:[e.jsx(Ye,{className:"mt-0.5 h-4 w-4 shrink-0 text-primary","aria-hidden":"true"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"mb-2 text-sm font-semibold text-ink",children:c.pastJobs}),e.jsx(E,{items:s.pastJobs})]}),e.jsx("button",{type:"button",className:"shrink-0 rounded-lg bg-primary px-3 py-1.5 text-xs font-semibold text-ink-invert hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary/40",onClick:()=>p({kind:"editPast"}),"aria-label":`Edit ${c.pastJobs}`,children:c.edit})]}),e.jsxs("div",{className:"flex items-start gap-3 py-3",children:[e.jsx(Ue,{className:"mt-0.5 h-4 w-4 shrink-0 text-primary","aria-hidden":"true"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"mb-2 text-sm font-semibold text-ink",children:c.targetJob}),s.targetJob?e.jsx("span",{className:"rounded-full border border-border bg-gray-50 px-2.5 py-1 text-xs text-ink",children:s.targetJob.title}):e.jsx("span",{className:"text-ink-soft text-sm",children:c.empty})]}),e.jsx("button",{type:"button",className:"shrink-0 rounded-lg bg-primary px-3 py-1.5 text-xs font-semibold text-ink-invert hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary/40",onClick:()=>p({kind:"editTarget"}),"aria-label":`Edit ${c.targetJob}`,children:c.edit})]}),e.jsxs("div",{className:"flex items-start gap-3 py-3",children:[e.jsx(We,{className:"mt-0.5 h-4 w-4 shrink-0 text-primary","aria-hidden":"true"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"mb-2 text-sm font-semibold text-ink",children:c.region}),s.region?e.jsx("span",{className:"rounded-full border border-border bg-gray-50 px-2.5 py-1 text-xs text-ink",children:s.region}):e.jsx("span",{className:"text-ink-soft text-sm",children:c.empty})]}),e.jsx("button",{type:"button",className:"shrink-0 rounded-lg bg-primary px-3 py-1.5 text-xs font-semibold text-ink-invert hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary/40",onClick:()=>p({kind:"editRegion"}),"aria-label":`Edit ${c.region}`,children:c.edit})]})]}),m.kind==="editPast"&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 p-4",children:e.jsxs("div",{className:"w-full max-w-3xl max-h-[90vh] overflow-y-auto rounded-xl bg-white shadow-modal",children:[e.jsxs("div",{className:"sticky top-0 border-b border-border bg-white p-6",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsxs("h4",{className:"text-xl font-heading font-bold text-ink",children:["Edit ",c.pastJobs]}),e.jsx("button",{onClick:()=>p({kind:"idle"}),className:"rounded-lg p-1 hover:bg-gray-100","aria-label":"Close",children:e.jsx("svg",{className:"h-5 w-5 text-ink-soft",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("p",{className:"text-sm text-ink-soft",children:c.pastJobsHelp})]}),e.jsxs("div",{className:"p-6",children:[e.jsx(fe,{industryOptions:a.industryOptions,industryCode:a.industryCode,onIndustryChange:a.onIndustryChange,keyword:a.keyword,onKeywordChange:a.onKeywordChange,onSearch:a.onSearch,searchError:a.searchError,results:a.results,isFetching:a.isFetching,isError:a.isError,noResults:a.noResults,pickedIds:s.pastJobs.map(r=>r.id),onAdd:D,onRemove:r=>R(r),maxSelectable:5,selectedCount:s.pastJobs.length,addDisabledReason:"Limit reached: 5 roles selected."}),e.jsx(I,{picked:s.pastJobs.map(r=>({id:r.id,title:r.title})),onRemove:r=>R(r),max:5})]})]})}),m.kind==="editTarget"&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 p-4",children:e.jsxs("div",{className:"w-full max-w-3xl max-h-[90vh] overflow-y-auto rounded-xl bg-white shadow-modal",children:[e.jsxs("div",{className:"sticky top-0 border-b border-border bg-white p-6",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsxs("h4",{className:"text-xl font-heading font-bold text-ink",children:["Edit ",c.targetJob]}),e.jsx("button",{onClick:()=>p({kind:"idle"}),className:"rounded-lg p-1 hover:bg-gray-100","aria-label":"Close",children:e.jsx("svg",{className:"h-5 w-5 text-ink-soft",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("p",{className:"text-sm text-ink-soft",children:c.targetJobHelp})]}),e.jsxs("div",{className:"p-6",children:[e.jsx(fe,{industryOptions:a.industryOptions,industryCode:a.industryCode,onIndustryChange:a.onIndustryChange,keyword:a.keyword,onKeywordChange:a.onKeywordChange,onSearch:a.onSearch,searchError:a.searchError,results:a.results,isFetching:a.isFetching,isError:a.isError,noResults:a.noResults,pickedIds:s.targetJob?[s.targetJob.id]:[],onAdd:y,onRemove:()=>C(),maxSelectable:1,selectedCount:s.targetJob?1:0,addDisabledReason:"You can only choose one target occupation.",allowAddWhenCapped:!0,onCapAddAttempt:r=>{const v=s.targetJob?.title||s.targetJob?.id||"current selection",g=r.title;window.confirm(`Do you want to change your target job from “${v}” to “${g}”?`)&&y(r)}}),e.jsx(I,{picked:s.targetJob?[{id:s.targetJob.id,title:s.targetJob.title}]:[],onRemove:()=>C(),max:1})]})]})}),e.jsx(l,{title:`Edit ${c.region}`,open:m.kind==="editRegion",options:o,value:s.region??null,onClose:()=>p({kind:"idle"}),onSave:S,helperText:c.regionHelp})]})}const ze=()=>`skill-${Date.now()}-${Math.random().toString(36).slice(2,10)}`,_=t=>{if(!t)return;const s=new Date(t);return Number.isNaN(s.getTime())?void 0:s},De=t=>{const s=_(t);return s?s.toLocaleDateString():"Not scheduled"},nt=t=>(t??[]).map(s=>({...s,id:s.id??ze()}));function te(t){if("showPicker"in t&&typeof t.showPicker=="function"){document.activeElement!==t&&t.focus();try{t.showPicker()}catch{}}}function Ee(t){["Tab","Shift","Control","Alt","Escape","Enter"," ","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(t.key)||t.preventDefault()}function it({initialSkills:t,onChange:s}){const[i,o]=u.useState(()=>nt(t)),[l,a]=u.useState(!1),[h,c]=u.useState(!1),[m,p]=u.useState(null),[f,j]=u.useState(!1),[k,S]=u.useState("all"),[D,R]=u.useState("all"),[y,C]=u.useState(new Set),[E,I]=u.useState(!1),[r,v]=u.useState({abilityType:"",category:"",skill:"",code:"",startDate:"",endDate:""}),g=u.useRef(null),A=u.useRef(null),$=u.useMemo(()=>{const n=new Date,x=String(n.getMonth()+1).padStart(2,"0"),N=String(n.getDate()).padStart(2,"0");return`${n.getFullYear()}-${x}-${N}`},[]),F=n=>{o(n),s?.(n)},re=n=>n?n==="skill"?["content","process","crossFunctional"]:n==="knowledge"?["management","production","technical","science","health","education","culture","public","communication"]:["business","productivity","development","database","education","industry","network","system","security","communication","management"]:[],B=(n,x)=>{if(!n||!x)return[];if(n==="skill"){if(x==="content")return Z.content;if(x==="process")return Z.process;if(x==="crossFunctional")return[...Z.crossFunctional.resourceManagement,...Z.crossFunctional.technical]}else{if(n==="knowledge")return Je[x]||[];if(n==="tech")return Pe[x]||[]}return[]},L=(n,x)=>{const N=_(n),z=_(x);if(!N||!z)return{status:"not-scheduled",label:"Not scheduled",color:"bg-gray-100 text-ink-soft border-border",icon:xe,sortOrder:4};const d=new Date;return d<N?{status:"not-started",label:"Not Started",color:"bg-gray-100 text-ink-soft border-border",icon:xe,sortOrder:3}:d>=N&&d<=z?{status:"in-progress",label:"In Progress",color:"bg-primary/10 text-primary border-primary",icon:we,sortOrder:2}:{status:"completed",label:"Date Passed",color:"bg-accent/20 text-black border-accent",icon:Ne,sortOrder:1}},J=u.useMemo(()=>{let n=[...i];return k!=="all"&&(n=n.filter(x=>x.abilityType===k)),D!=="all"&&(n=n.filter(x=>L(x.startDate,x.endDate).status===D)),n.sort((x,N)=>{const z=L(x.startDate,x.endDate),d=L(N.startDate,N.endDate);return z.sortOrder-d.sortOrder}),n},[i,k,D]),O=u.useMemo(()=>{const n=i.length,x=i.reduce((d,M)=>{const ce=_(M.startDate),Ae=_(M.endDate);return d+(!ce||!Ae?1:0)},0);let N=0,z=0;for(const d of i){const M=L(d.startDate,d.endDate).status;M==="in-progress"&&(N+=1),M==="completed"&&(z+=1)}return{total:n,notScheduled:x,inProgress:N,datePassed:z}},[i]),H=!!(r.abilityType&&r.category&&r.skill),K=H,G=r.abilityType?r.category?r.skill?void 0:"Please select skill.":"Please select category.":"Please select ability type.",Y=H,ae=G,b=()=>{if(!K)return;const n={id:ze(),abilityType:r.abilityType,category:r.category,skill:r.skill,code:r.code?.trim()?r.code.trim():void 0,startDate:r.startDate||void 0,endDate:r.endDate||void 0};F([...i,n]),U(),a(!1)},T=()=>{!m||!Y||(F(i.map(n=>n.id===m.id?{...n,abilityType:r.abilityType,category:r.category,skill:r.skill,code:r.code?.trim()?r.code.trim():void 0,startDate:r.startDate||void 0,endDate:r.endDate||void 0}:n)),U(),c(!1),p(null))},P=n=>{if(F(i.filter(x=>x.id!==n)),y.has(n)){const x=new Set(y);x.delete(n),C(x)}},ne=n=>{p(n),v({abilityType:n.abilityType,category:n.category,skill:n.skill,code:n.code||"",startDate:n.startDate??"",endDate:n.endDate??""}),c(!0)},U=()=>{v({abilityType:"",category:"",skill:"",code:"",startDate:"",endDate:""})},ie=n=>{const x=new Set(y);x.has(n)?x.delete(n):x.add(n),C(x)},oe=()=>{y.size===J.length?C(new Set):C(new Set(J.map(n=>n.id)))},W=()=>{y.size!==0&&confirm(`Delete ${y.size} selected skill(s)?`)&&(F(i.filter(n=>!y.has(n.id))),C(new Set),I(!1))},Q=()=>{S("all"),R("all")},le=({show:n,title:x,children:N})=>n?e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 p-3 sm:p-4",children:e.jsx("div",{className:`bg-white rounded-xl shadow-modal w-full max-h-[98vh] overflow-y-auto
             max-w-sm sm:max-w-md md:max-w-lg lg:max-w-2xl xl:max-w-3xl`,children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-heading font-bold text-ink mb-3 sm:mb-4",children:x}),N]})})}):null,ge=({onSubmit:n,submitLabel:x,disabled:N,disabledReason:z})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink mb-2",children:"Ability Type"}),e.jsxs("select",{value:r.abilityType,onChange:d=>v({...r,abilityType:d.target.value,category:"",skill:"",code:""}),className:"w-full p-2.5 sm:p-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/40 text-ink",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"skill",children:"Skill"}),e.jsx("option",{value:"knowledge",children:"Knowledge"}),e.jsx("option",{value:"tech",children:"Tech Skill"})]})]}),r.abilityType&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink mb-2",children:"Category"}),e.jsxs("select",{value:r.category,onChange:d=>v({...r,category:d.target.value,skill:"",code:""}),className:"w-full p-2.5 sm:p-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/40 text-ink",children:[e.jsx("option",{value:"",children:"Select Category"}),re(r.abilityType).map(d=>e.jsx("option",{value:d,children:d.charAt(0).toUpperCase()+d.slice(1)},d))]})]}),r.category&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink mb-2",children:"Skill"}),e.jsxs("select",{value:r.skill,onChange:d=>{const M=B(r.abilityType,r.category).find(ce=>ce.name===d.target.value);v({...r,skill:d.target.value,code:M?.code||""})},className:"w-full p-2.5 sm:p-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/40 text-ink",children:[e.jsx("option",{value:"",children:"Select Skill"}),B(r.abilityType,r.category).map(d=>e.jsx("option",{value:d.name,children:d.name},d.code||d.name))]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink mb-2",children:"Start Date"}),e.jsx("input",{ref:g,type:"date",value:r.startDate,min:$,onClick:d=>te(d.currentTarget),onKeyDown:d=>{d.key==="Enter"||d.key===" "?(te(d.currentTarget),d.preventDefault()):Ee(d)},onChange:d=>v({...r,startDate:d.target.value}),className:"w-full p-2.5 sm:p-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/40 text-ink"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink mb-2",children:"End Date"}),e.jsx("input",{ref:A,type:"date",value:r.endDate,min:r.startDate||$,onClick:d=>te(d.currentTarget),onKeyDown:d=>{d.key==="Enter"||d.key===" "?(te(d.currentTarget),d.preventDefault()):Ee(d)},onChange:d=>v({...r,endDate:d.target.value}),className:"w-full p-2.5 sm:p-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/40 text-ink"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-2 sm:pt-4",children:[e.jsx(w,{variant:"primary",size:"md",onClick:n,disabled:N,tooltipWhenDisabled:N?z:void 0,"aria-label":x,className:"w-full sm:flex-1",children:x}),e.jsx(w,{variant:"ghost",size:"md",onClick:()=>{U(),a(!1),c(!1),p(null)},"aria-label":"Cancel",className:"w-full sm:flex-1",children:"Cancel"})]})]});return e.jsx("div",{className:"bg-white p-4 sm:p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 sm:gap-4 items-start sm:items-center mb-6 sm:mb-8",children:[e.jsx("h3",{className:"text-xl sm:text-xl lg:text-xl font-heading font-bold text-ink"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap",children:[i.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(w,{variant:"ghost",size:"sm",onClick:()=>I(!E),"aria-label":E?"Exit batch mode":"Enter batch mode",className:E?"border-primary text-primary bg-primary/10":void 0,children:[e.jsx(me,{size:18,className:"mr-1.5"}),"Batch"]}),e.jsxs(w,{variant:"ghost",size:"sm",onClick:()=>j(n=>!n),"aria-label":f?"Show all":"Show less",children:[f?e.jsx(_e,{size:18,className:"mr-1.5"}):e.jsx(qe,{size:18,className:"mr-1.5"}),f?"Show all":"Show less"]})]}),e.jsxs(w,{variant:"primary",size:"md",onClick:()=>a(!0),"aria-label":"Add new skill",children:[e.jsx(ve,{size:18,className:"sm:hidden mr-1"}),e.jsx(ve,{size:20,className:"hidden sm:inline-block mr-1"}),"Add Skill"]})]})]}),i.length>0&&!f&&e.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-border p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ke,{size:18,className:"text-primary"}),e.jsx("h3",{className:"font-semibold text-ink",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-soft mb-1",children:"Type"}),e.jsxs("select",{value:k,onChange:n=>S(n.target.value),className:"w-full p-2 border border-border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary/40",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"skill",children:"Skill"}),e.jsx("option",{value:"knowledge",children:"Knowledge"}),e.jsx("option",{value:"tech",children:"Tech Skill"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-soft mb-1",children:"Status"}),e.jsxs("select",{value:D,onChange:n=>R(n.target.value),className:"w-full p-2 border border-border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary/40",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"completed",children:"Date Passed"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"not-started",children:"Not Started"}),e.jsx("option",{value:"not-scheduled",children:"Not Scheduled"})]})]})]}),(k!=="all"||D!=="all")&&e.jsxs(w,{variant:"ghost",size:"sm",onClick:Q,"aria-label":"Clear all filters",className:"mt-3 inline-flex items-center gap-1 text-primary hover:underline",children:[e.jsx(pe,{size:14}),"Clear all filters"]})]}),E&&y.size>0&&e.jsxs("div",{className:"bg-primary/10 border border-primary rounded-xl p-4 mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsxs("span",{className:"text-sm font-medium text-ink",children:[y.size," skill",y.size>1?"s":""," selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(w,{variant:"primary",size:"sm",onClick:W,"aria-label":"Delete selected skills",className:"bg-red-600 hover:bg-red-700",children:[e.jsx(ue,{size:16,className:"mr-1.5"}),"Delete Selected"]}),e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>C(new Set),"aria-label":"Cancel batch selection",children:"Cancel"})]})]}),f&&i.length>0?e.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-border p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-heading font-semibold text-ink mb-3 sm:mb-4",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"rounded-lg border border-border p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-ink-soft mb-1",children:"Total"}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-ink",children:O.total})]}),e.jsxs("div",{className:"rounded-lg border border-border p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm text-ink-soft mb-1",children:[e.jsx(Ne,{size:14}),e.jsx("span",{children:"Date Passed"})]}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-ink",children:O.datePassed})]}),e.jsxs("div",{className:"rounded-lg border border-border p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm text-ink-soft mb-1",children:[e.jsx(xe,{size:14}),e.jsx("span",{children:"Not Scheduled"})]}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-ink",children:O.notScheduled})]}),e.jsxs("div",{className:"rounded-lg border border-border p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm text-ink-soft mb-1",children:[e.jsx(we,{size:14}),e.jsx("span",{children:"In Progress"})]}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-ink",children:O.inProgress})]})]})]}):e.jsx(e.Fragment,{children:i.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-border p-8 sm:p-12 text-center",children:[e.jsx(ee,{size:56,className:"mx-auto mb-3 text-ink-soft/40 sm:hidden"}),e.jsx(ee,{size:64,className:"mx-auto mb-4 text-ink-soft/40 hidden sm:block"}),e.jsx("h2",{className:"text-lg sm:text-2xl font-heading font-semibold text-ink mb-2",children:"Not selected yet"}),e.jsx("p",{className:"text-ink-soft mb-4 sm:mb-6 text-sm sm:text-base",children:"Start building your learning roadmap by adding your first skill"}),e.jsx(w,{variant:"primary",size:"md",onClick:()=>a(!0),"aria-label":"Add your first skill",children:"Add Your First Skill"})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-border",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-border flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 bg-gray-50/50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-ink-soft",children:[e.jsx(Ge,{size:16}),e.jsx("span",{children:"Sorted: Date Passed → In Progress → Not Started → Not Scheduled"})]}),E&&e.jsx(w,{variant:"ghost",size:"sm",onClick:oe,"aria-label":y.size===J.length?"Deselect all":"Select all",className:"text-primary hover:underline",children:y.size===J.length?e.jsxs(e.Fragment,{children:[e.jsx(me,{size:16,className:"mr-1"}),"Deselect All"]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{size:16,className:"mr-1"}),"Select All"]})})]}),e.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:e.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:J.map(n=>{const x=L(n.startDate,n.endDate),N=x.icon,z=y.has(n.id);return e.jsx("div",{className:`bg-white rounded-xl border p-4 sm:p-5 hover:shadow-lg transition ${z?"border-primary bg-primary/5":"border-border"}`,children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[E&&e.jsx("button",{onClick:()=>ie(n.id),className:"mt-1 flex-shrink-0 focus:outline-none focus:ring-2 focus:ring-primary/40 rounded","aria-label":z?"Unselect skill":"Select skill",children:z?e.jsx(me,{size:20,className:"text-primary"}):e.jsx(Se,{size:20,className:"text-ink-soft"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-heading font-bold text-ink leading-snug whitespace-normal break-words",children:n.skill}),e.jsxs("div",{className:"mt-1.5 flex flex-wrap items-center gap-2 text-xs sm:text-sm text-ink-soft",children:[e.jsx("span",{className:"capitalize font-medium",children:n.abilityType}),e.jsx("span",{children:"→"}),e.jsx("span",{className:"capitalize",children:n.category}),e.jsxs("span",{className:`ml-2 inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] sm:text-xs font-medium border ${x.color}`,children:[e.jsx(N,{size:12}),x.label]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ee,{size:14,className:"opacity-70"}),e.jsxs("span",{children:["Start: ",De(n.startDate)]})]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ee,{size:14,className:"opacity-70"}),e.jsxs("span",{children:["End: ",De(n.endDate)]})]})]})]}),!E&&e.jsxs("div",{className:"flex gap-1.5 sm:gap-2 flex-shrink-0",children:[e.jsxs(w,{variant:"ghost",size:"sm",onClick:()=>ne(n),"aria-label":"Edit skill",tooltipWhenDisabled:void 0,className:"p-1.5 sm:p-2 text-primary hover:bg-primary/10 rounded-lg",children:[e.jsx(Ce,{size:18,className:"sm:hidden"}),e.jsx(Ce,{size:20,className:"hidden sm:block"})]}),e.jsxs(w,{variant:"ghost",size:"sm",onClick:()=>P(n.id),"aria-label":"Remove skill",className:"p-1.5 sm:p-2 text-red-600 hover:bg-red-50 rounded-lg",children:[e.jsx(ue,{size:18,className:"sm:hidden"}),e.jsx(ue,{size:20,className:"hidden sm:block"})]})]})]})},n.id)})})}),J.length>0&&e.jsxs("div",{className:"px-4 py-3 border-top border-border bg-gray-50/50 text-center text-sm text-ink-soft",children:["Showing ",J.length," of ",i.length," skill",i.length!==1?"s":""]}),J.length===0&&i.length>0&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(ke,{size:48,className:"mx-auto mb-3 text-ink-soft/40"}),e.jsx("h3",{className:"text-lg font-semibold text-ink mb-2",children:"No skills match your filters"}),e.jsx("p",{className:"text-ink-soft mb-4",children:"Try adjusting your filter criteria"}),e.jsx(w,{variant:"ghost",size:"sm",onClick:Q,"aria-label":"Clear all filters",className:"text-primary hover:underline",children:"Clear all filters"})]})]})}),e.jsx(le,{show:l,title:"Add New Skill",children:e.jsx(ge,{onSubmit:b,submitLabel:"Add Skill",disabled:!K,disabledReason:G})}),e.jsx(le,{show:h,title:"Edit Skill",children:e.jsx(ge,{onSubmit:T,submitLabel:"Update Skill",disabled:!Y,disabledReason:ae})})]})})}function ot({mode:t="button",label:s="Remove",title:i="Confirm remove",message:o="Are you sure you want to delete this? This action cannot be undone. You can add it back manually later.",confirmText:l="Confirm",cancelText:a="Cancel",disabled:h,onConfirm:c,className:m}){const[p,f]=V.useState(!1),j=()=>f(!0),k=()=>f(!1),S=t==="button"?e.jsx(w,{variant:"primary",size:"md",onClick:j,disabled:h,className:m,children:s}):e.jsx(w,{variant:"primary",size:"sm",onClick:j,disabled:h,className:`h-11 w-11 rounded-full p-0 ${m??""}`,"aria-label":s,title:s,children:e.jsx("svg",{viewBox:"0 0 24 24",role:"img","aria-label":"Remove",fill:"currentColor",className:"h-[20px] w-[20px] md:h-[22px] md:w-[22px] shrink-0",children:e.jsx("path",{d:"M9 3h6a1 1 0 0 1 1 1v1h4v2h-1v12a3 3 0 0 1-3 3H8a3 3 0 0 1-3-3V7H4V5h4V4a1 1 0 0 1 1-1Zm1 2v0h4V5h-4ZM7 7v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V7H7Zm4 3h2v8h-2v-8Z"})})});return e.jsxs(e.Fragment,{children:[S,p&&e.jsx(lt,{title:i,message:o,confirmText:l,cancelText:a,onConfirm:async()=>{await c(),k()},onCancel:k})]})}function lt({title:t,message:s,confirmText:i,cancelText:o,onConfirm:l,onCancel:a}){const h=V.useRef(null),c=V.useRef(null),m=V.useCallback(()=>{const f=h.current;if(!f)return[];const j=["button:not([disabled])","a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","[tabindex]:not([tabindex='-1'])"].join(",");return Array.from(f.querySelectorAll(j)).filter(S=>!S.hasAttribute("disabled")&&S.offsetParent!==null)},[]);V.useEffect(()=>{c.current=document.activeElement;const f=document.body.style.overflow;return document.body.style.overflow="hidden",(h.current?.querySelector("[data-autofocus]")??m()[0]??null)?.focus(),()=>{document.body.style.overflow=f,c.current?.focus()}},[m]),V.useEffect(()=>{const f=j=>{j.key==="Escape"&&a()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[a]);const p=f=>{if(f.key!=="Tab")return;const j=m();if(j.length===0)return;const k=j[0],S=j[j.length-1];f.shiftKey?document.activeElement===k&&(f.preventDefault(),S.focus()):document.activeElement===S&&(f.preventDefault(),k.focus())};return e.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"confirm-remove-title",className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/40 backdrop-blur-sm",onClick:a,onKeyDown:p,children:e.jsxs("div",{ref:h,onClick:f=>f.stopPropagation(),className:"w-[min(520px,90vw)] rounded-2xl bg-white p-6 shadow-modal focus:outline-none",children:[e.jsx("h2",{id:"confirm-remove-title",className:"text-lg font-semibold text-ink",children:t}),e.jsx("p",{className:"mt-3 text-sm leading-relaxed text-ink-soft",children:s}),e.jsxs("div",{className:"mt-5 flex justify-end gap-3",children:[e.jsx(w,{variant:"ghost",size:"md",onClick:a,className:"min-w-[90px]","aria-label":o,"data-autofocus":!0,children:o}),e.jsx(w,{variant:"primary",size:"md",onClick:l,className:"min-w-[90px]","aria-label":i,children:i})]})]})})}function ct(t){return/^https?:\/\//i.test(t)?t:`https://${t}`}const dt=({items:t,title:s="Training advice",ariaLabel:i="Training advice list",onSelect:o,onRemove:l,maxVisible:a})=>{const h=typeof a=="number"?t.slice(0,Math.max(0,a)):t;return e.jsxs("section",{"aria-label":i,children:[e.jsx("header",{className:"mb-3",children:e.jsx("h3",{className:"text-base font-semibold text-ink",children:s})}),h.length===0?e.jsx("div",{className:"rounded-xl border border-border p-6 text-sm text-ink-soft",children:"No training available"}):e.jsx("ul",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3",children:h.map(c=>{const m=`${c.code}|${c.url}`,p=ct(c.url);return e.jsx("li",{children:e.jsxs("article",{className:"group relative h-full rounded-xl border border-border bg-white p-4 hover:shadow-card transition",children:[l&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(ot,{mode:"circle",title:"Remove training advice",message:`Are you sure you want to remove "${c.title}"? This action cannot be undone.`,confirmText:"Remove",cancelText:"Cancel",onConfirm:()=>l(c)})}),e.jsxs("div",{className:"mb-2 flex items-start gap-3",children:[e.jsx("div",{className:"shrink-0 mt-1",children:e.jsx(Qe,{size:20,className:"text-primary"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h4",{className:"line-clamp-2 text-sm font-medium text-ink pr-8",children:c.title})})]}),e.jsx("div",{className:"mb-3 ml-8",children:e.jsx("span",{className:"inline-block rounded-full border border-border bg-gray-50 px-2.5 py-0.5 text-[11px] text-ink-soft font-medium",children:c.code})}),e.jsx("div",{className:"mt-3 ml-8",children:e.jsxs("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 rounded-full border border-primary bg-white px-4 py-1.5 text-sm text-primary font-medium hover:bg-primary hover:text-ink-invert transition focus:outline-none focus:ring-2 focus:ring-primary/40","aria-label":`Open ${c.title} in new tab`,onClick:()=>o?.(c),children:[e.jsx("span",{children:"Visit course"}),e.jsx(Ze,{size:14})]})})]})},m)})})]})};function mt(t,s){const i=t.trim();if(!i)throw new Error("Keyword is required");return Ie("/api/glossary/detail",{q:i},s)}async function ut(t,s){return await mt(t,{signal:s,timeoutMs:6e3})}function xt(t){const s=!!(t&&t.trim().length>0);return rt({queryKey:["glossary","suggest",t],queryFn:({signal:i})=>ut(t.trim(),i),enabled:s,placeholderData:i=>i,staleTime:6e4,retry:0})}function ht(t,s){const[i,o]=u.useState(t);return u.useEffect(()=>{const l=window.setTimeout(()=>o(t),s);return()=>window.clearTimeout(l)},[t,s]),i}function pt({className:t="",minChars:s=1,debounceMs:i=120}){const[o,l]=u.useState(""),[a,h]=u.useState(null),c=ht(o,i),m=c.trim().length>=s,{data:p,isFetching:f,isError:j,error:k,refetch:S}=xt(m?c:null),D=u.useMemo(()=>Array.isArray(p)?p:[],[p]),[R,y]=u.useState(!1),C=u.useRef(null);u.useEffect(()=>{function g(A){C.current&&(C.current.contains(A.target)||y(!1))}return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]),u.useEffect(()=>y(m),[m]),u.useEffect(()=>{a&&!a.term.toLowerCase().startsWith(o.toLowerCase())&&h(null)},[o,a]);const E=g=>{h(g),l(g.term),y(!1)},I=()=>{l(""),h(null),y(!1)},r=g=>{l(g),y(!0),h(null)},v=!f&&!j&&m&&Array.isArray(p)&&p.length===0;return e.jsxs("div",{ref:C,className:`rounded-xl border border-border bg-white shadow-card p-6 ${t}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Te,{className:"h-5 w-5 text-primary","aria-hidden":"true"}),e.jsx("h3",{className:"text-base font-semibold",children:"VET Glossary"})]}),e.jsx("p",{className:"text-sm text-ink-soft mb-4",children:"Type a prefix to see VET terms. Click a term to view its full details."}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("input",{id:"glossary-input",type:"text",value:o,onChange:g=>l(g.target.value),placeholder:"Enter a prefix or a keyword",className:"w-full px-4 py-2 pr-10 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/40 text-sm","aria-label":"Search VET terminology",onFocus:()=>{m&&y(!0)},"aria-autocomplete":"list","aria-expanded":R,"aria-controls":"glossary-listbox"}),o&&e.jsx("button",{onClick:I,className:"absolute right-3 top-1/2 -translate-y-1/2 text-ink-soft hover:text-ink transition","aria-label":"Clear search",children:e.jsx(pe,{className:"h-4 w-4"})}),R&&e.jsxs("div",{className:"absolute z-10 mt-1 max-h-72 w-full overflow-auto rounded-lg border border-gray-200 bg-white shadow-lg",role:"listbox",id:"glossary-listbox",children:[f&&D.length===0&&e.jsx("div",{className:"p-3 text-sm text-ink-soft",children:"Loading…"}),j&&e.jsxs("div",{className:"p-3 text-sm text-red-700",children:["Connection failed."," ",e.jsx("button",{type:"button",className:"ml-1 rounded bg-red-50 px-2 py-1 text-xs text-red-700 hover:bg-red-100",onClick:()=>S(),children:"Retry"}),k?.message?e.jsxs("span",{className:"ml-1 opacity-70",children:["(",k.message,")"]}):null]}),v&&e.jsx("div",{className:"p-3 text-sm text-ink-soft",children:"No information found."}),!j&&D.length>0&&e.jsx("ul",{className:"divide-y divide-gray-100",children:D.map(g=>e.jsx("li",{children:e.jsxs("button",{type:"button",className:"flex w-full items-center px-3 py-2 text-left hover:bg-gray-50 focus:bg-gray-50",onClick:()=>E(g),role:"option","aria-selected":a?.term===g.term,children:[e.jsx(Xe,{className:"h-4 w-4 mr-2 text-ink-soft","aria-hidden":"true"}),e.jsx("span",{className:"font-medium text-ink",children:g.term})]})},g.term))})]})]}),!o&&!a&&!f&&e.jsxs("div",{className:"text-center py-8 text-ink-soft",children:[e.jsx(Te,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Enter a VET term prefix to see suggestions"})]}),a&&e.jsxs("section",{className:"space-y-4 animate-in fade-in duration-200",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold text-ink mb-1",children:a.term}),a.acronym&&e.jsxs("p",{className:"text-sm text-ink-soft",children:[e.jsx("span",{className:"font-medium",children:"Acronym:"})," ",a.acronym]})]}),e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("p",{className:"text-sm text-ink leading-relaxed",children:a.description||"No description provided."})}),a.also_called&&a.also_called.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-ink mb-2",children:"Also called:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.also_called.map(g=>e.jsx("span",{className:"inline-block px-2 py-1 rounded-full bg-gray-100 text-xs text-ink",children:g},g))})]}),a.see_also&&a.see_also.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-ink mb-2 flex items-center gap-1",children:[e.jsx(et,{className:"h-4 w-4"}),"See also:"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.see_also.map(g=>e.jsx("button",{onClick:()=>r(g),className:"inline-block px-3 py-1.5 rounded-lg bg-primary/10 text-primary text-sm hover:bg-primary/20 transition font-medium",children:g},g))})]})]})]})}const gt=()=>[{id:"profile-welcome",target:"#profile-header",title:"Welcome to Your Profile!",content:"This is your personalized career command center. Unlike the analyzer test, everything here is fully customizable. You can manually add, edit, or remove any information to suit your career goals. Let's explore what you can do!",placement:"bottom"},{id:"career-intent-intro",target:"#career-intent",title:"Step 1: Define Your Career Intent",content:"This section is completely customizable. Add your past roles, choose your target occupation, and select your preferred work location. All fields can be edited at any time to reflect your evolving career goals.",placement:"bottom"},{id:"past-jobs-custom",target:"#career-intent",title:"Past Roles (Fully Customizable)",content:"Click 'Edit' to search and add up to 5 past occupations. You can add any roles manually - they don't need to come from the analyzer test. These help us understand your experience but won't trigger automatic analysis.",placement:"bottom"},{id:"target-job-auto-analysis",target:"#career-intent ",title:"Target Occupation (Auto-Analysis)",content:"This is important! When you select a target occupation, we automatically fetch relevant training courses for you. This is the ONLY field that triggers automatic analysis. Change it anytime to get fresh training recommendations.",placement:"top"},{id:"region-manual",target:"#career-intent ",title:"Preferred Region (Your Choice)",content:"Choose the Australian state or territory where you want to work. This is purely informational and can be updated anytime. It doesn't affect the training advice - that's based solely on your target occupation.",placement:"top"},{id:"skill-roadmap-manual",target:"#skill-roadmap",title:"Step 2: Your Skill Roadmap",content:"This is your personal skill development tracker. You can manually add any skills you want to learn, set timelines, and organize them by category. If you've completed the analyzer test, missing skills will appear here automatically, but you're free to customize everything.",placement:"top"},{id:"roadmap-features",target:"#skill-roadmap",title:"Customize Your Learning Plan",content:"Add target dates to each skill, manually add new skills, change categories, or remove items. Use filters to organize by type (Knowledge, Tech, Skills) or status (Not Started, In Progress, Completed). Everything here is under your control.",placement:"top"},{id:"empty-roadmap-guidance",target:"#skill-roadmap",title:"Need Help Identifying Skills?",content:"If your roadmap is empty, consider taking the Analyzer test. It will assess your abilities against your target role and automatically populate this roadmap with the skills you're missing. But remember - this is optional! You can build your roadmap completely manually.",placement:"top"},{id:"training-auto-generated",target:"#training-advice",title:"Step 3: Training Advice (Auto-Generated)",content:"Based ONLY on your target occupation, we automatically fetch relevant VET (Vocational Education and Training) courses from Australia's official registry. This list updates whenever you change your target job. Remove courses that don't fit your needs.",placement:"top"},{id:"training-management",target:"#training-advice .rounded-xl.border",title:"Manage Your Course List",content:"Review each course and click the remove button (×) to exclude courses that aren't relevant. The list regenerates automatically when you select a different target occupation. Click any course title to view full details on the official training website.",placement:"top"},{id:"analyzer-test-reminder",target:"#training-advice",title:"Want More Detailed Analysis?",content:"The training advice here is based only on your target occupation. For a comprehensive skill gap analysis that considers your past experience and abilities, take the Analyzer test. It provides personalized recommendations based on your complete profile.",placement:"top"},{id:"vet-terminology-tool",target:"#vet-terminology",title:"Step 4: VET Terminology Dictionary",content:"Confused by course jargon? Use this dictionary to look up unfamiliar VET (Vocational Education and Training) terms before enrolling in courses. Search for any term to get a clear explanation.",placement:"top"},{id:"vet-search-demo",target:"#vet-terminology input",title:"Quick Term Lookup",content:"Type any unfamiliar term (like 'AQF', 'RTO', or 'competency') and we'll show you what it means. This helps you make informed decisions about training courses without needing to research elsewhere.",placement:"bottom"},{id:"export-pdf-feature",target:"#career-intent button[aria-label*='Export']",title:"Export Your Profile",content:"Need to save or share your profile? Click 'Export PDF' to download a formatted document containing your career intent, skill roadmap, and training advice. If the Export PDF function isn't working, try a screenshot instead.",placement:"left"},{id:"help-toggle-hint",target:"#profile-header .shrink-0 [data-help-toggle]",title:"Quick Help Anytime",content:"See this question mark icon? Click it for quick tips about each section. Each help popup provides context-specific guidance without interrupting your workflow.",placement:"left"},{id:"final-action-plan",target:"#profile-header",title:"Your Action Plan",content:"Ready to get started? Here's your workflow: (1) Set your target occupation to get training courses, (2) Manually plan your skill roadmap with timelines, (3) Review and remove irrelevant courses, (4) Look up any unfamiliar terms. For detailed skill gap analysis, take the Analyzer test!",placement:"bottom"}],ft=["New South Wales","Victoria","Queensland","Western Australia","South Australia","Tasmania","Northern Territory","Australian Capital Territory"],bt=t=>`https://training.gov.au/training/details/${encodeURIComponent(t)}`,q=t=>typeof t=="string"?t:"",se=t=>{if(!Array.isArray(t))return[];const s=new Set,i=[];for(const o of t){if(!o)continue;const l=(typeof o=="string"?o:o.id??"").trim();if(!l||s.has(l))continue;s.add(l);const a=typeof o=="string"?o:o.title||l;i.push({id:l,title:a})}return i},he=t=>{if(!t)return null;if(typeof t=="string"){const i=t.trim();return i?{code:i,title:i}:null}const s=(t.code??"").trim();return s?{code:s,title:t.title||s}:null},yt=t=>{const s=q(t.name),i=typeof t.code=="string"?t.code:"";return!s&&!i?null:`${t.aType}:${i||s.toLowerCase()}`},jt=t=>{const s=q(t.skill),i=typeof t.code=="string"?t.code:"";return!s&&!i?null:`${t.abilityType}:${i||s.toLowerCase()}`},vt=t=>{const s=q(t.name),i=t.code??s,o=i?encodeURIComponent(i):`unnamed-${t.aType}`;return`${t.aType}:${o}`},kt=t=>{const s=new Set,i=[];for(const o of t){const l=yt(o),a=q(o.name);!l||!a||s.has(l)||(s.add(l),i.push({...o,name:a}))}return i},Nt=t=>{if(!t)return[];const s=o=>{if(typeof o=="string"){const l=o.trim();return l?{name:l}:null}if(o&&typeof o=="object"){const l=o,a=typeof l.code=="string"&&l.code.trim().length>0?l.code.trim():void 0,c=(typeof l.name=="string"&&l.name.trim()||typeof l.title=="string"&&l.title.trim()||typeof l.label=="string"&&l.label.trim()||a||"").trim();return c?{name:c,code:a}:null}return null},i=(o,l)=>(o??[]).map(s).filter(a=>a!==null).map(a=>({name:a.name,code:a.code,aType:l}));return[...i(t.skill,"skill"),...i(t.knowledge,"knowledge"),...i(t.tech,"tech")]},wt=t=>t.map((s,i)=>({id:`${vt(s)}:${i}`,abilityType:s.aType,category:s.aType,skill:q(s.name),code:typeof s.code=="string"?s.code:void 0})),St=t=>{const s=new Set,i=[];for(const o of t){const l=jt(o);l&&(s.has(l)||(s.add(l),i.push(o)))}return i},Ct=(t,s)=>{const i=t?.anzsco??s,l=(t?.vet_courses??[]).map(a=>({id:a.vet_course_code,name:a.course_name||a.vet_course_code}));return{occupation:i,courses:l}};function Tt({title:t,open:s,options:i,value:o,onClose:l,onSave:a,helperText:h}){const[c,m]=u.useState(o);return u.useEffect(()=>{m(o)},[o]),s?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"w-full max-w-md space-y-4 rounded-xl border border-border bg-white p-6 shadow-2xl",children:[e.jsx("h3",{className:"text-lg font-bold text-ink",children:t}),h&&e.jsx("p",{className:"text-sm text-ink-soft",children:h}),e.jsx("div",{className:"grid max-h-80 gap-2 overflow-y-auto",children:i.map(p=>e.jsx("button",{onClick:()=>m(p),className:"rounded-lg border px-3 py-2 text-left text-sm font-medium transition",style:{borderColor:c===p?"#5E75A4":"#e2e8f0",backgroundColor:c===p?"#5E75A4":"white",color:c===p?"white":"#0f172a"},children:p},p))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{c&&a(c),l()},className:"flex-1 rounded-full bg-primary py-2 px-4 font-semibold text-ink-invert transition hover:bg-primary/90",children:"Save"}),e.jsx("button",{onClick:l,className:"flex-1 rounded-full border border-border py-2 px-4 font-semibold text-ink transition hover:bg-gray-50",children:"Cancel"})]})]})}):null}function Pt(){const t=Fe(),{state:s}=tt(),i=st(),o=s??void 0,[l,a]=u.useState(!1),h=u.useRef(null),c=u.useRef(null),m=Re(b=>b.analyzer),p=o?.notice;u.useEffect(()=>{if(o){if(!m.chosenRoles?.length&&o.roles?.length&&t(be(se(o.roles))),!m.chosenAbilities?.length&&o.abilities?.length&&t(Le(o.abilities)),(!m.interestedIndustryCodes||m.interestedIndustryCodes.length===0)&&o.industries?.length&&t(Oe(o.industries)),!m.preferredRegion&&o.region&&t(ye(o.region)),!m.selectedJob&&o.selectedJob){const b=he(o.selectedJob);b&&t(je(b))}!m.trainingAdvice&&o.training&&t(de(o.training))}a(!0)},[]);const f=u.useMemo(()=>{const b=se(m.chosenRoles),T=he(m.selectedJob),P=m.preferredRegion||"",ne=se(o?.roles),U=he(o?.selectedJob),ie=o?.region||"",oe=b.length>0||l?b:ne,W=T??(l?null:U),Q=W?{id:W.code,title:W.title}:null;return{pastJobs:oe,targetJob:Q,region:l?P:P||ie}},[m,o,l]),j=b=>{t(be(se(b.pastJobs)));const T=b.targetJob?{code:b.targetJob.id,title:b.targetJob.title}:null;t(je(T)),t(ye(b.region))},k=m.selectedJob?.code??"",S=m.selectedJob?.title??"",{data:D,isFetching:R,isError:y}=Me(k);u.useEffect(()=>{if(!D||R||y)return;const b=Ct(D,{code:k,title:S});t(de(b))},[D,R,y,k,S,t]);const C=u.useMemo(()=>(m.trainingAdvice?.courses??[]).map(T=>({title:T.name??T.id,code:T.id,url:T.url??bt(T.id)})),[m.trainingAdvice]),[E,I]=u.useState(""),[r,v]=u.useState(""),[g,A]=u.useState(null),{data:$,isFetching:F,isError:re}=$e(g),B=u.useMemo(()=>Array.isArray($)?$:[],[$]),L={industryOptions:Ve.map(b=>({value:b.value,label:b.label})),industryCode:E,onIndustryChange:I,keyword:r,onKeywordChange:v,onSearch:()=>{const b=He(E)??"";(b||r.trim())&&A({industry:b,keyword:r.trim(),limit:20})},results:B,isFetching:F,isError:re,noResults:!F&&B.length===0},J=m.selectedJobUnmatched,O=o?.unmatched??null,H=u.useMemo(()=>kt(Nt(J??O??null)),[J,O]),K=u.useMemo(()=>{const b=St(wt(H));return{key:`unmatched:${b.length}`,items:b}},[H]),G=async()=>{if(!h.current)return;const T=`Profile${m.selectedJob?.code?`_${m.selectedJob.code}`:""}.pdf`;await Ke(h.current,T)},Y=!!m.selectedJob?.code,ae=()=>{Y&&i("/insight",{state:{selectedJob:m.selectedJob??null}})};return e.jsxs("div",{id:"profile-export-root",ref:h,children:[e.jsxs("div",{id:"profile-header",className:"relative bg-white px-4 py-12 sm:px-6 lg:px-8",children:[e.jsx(Be,{steps:gt,placement:"top-right",label:"View Tutorial",variant:"outline",ariaLabel:"View Profile Tutorial",className:"z-50",headerOffset:64,tutorialHeaderOffset:64,autoOpenOnceKey:"profile:tutorial:v1",autoOpenDelayMs:300}),e.jsxs("div",{className:"mx-auto max-w-7xl text-center",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-center gap-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 sm:text-4xl",children:"Profile"}),e.jsx(X,{placement:"bottom",openOn:"both",text:e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Career Intent:"})," Define your past roles, target job, and preferred location."]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Skill Roadmap:"})," Focus on abilities you're currently missing. Add target dates."]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Training Advice:"})," Discover relevant VET courses mapped to your target occupation."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"VET Glossary:"})," Look up unfamiliar course terminology before enrolling."]})]})})]}),e.jsx("p",{className:"mx-auto max-w-3xl text-base text-slate-700 sm:text-lg",children:"User Profile · Career Roadmap · Skill Development · Glossary Search"}),p&&e.jsx("div",{className:"mt-4 inline-block rounded-lg border border-green-300 bg-green-50 p-4 text-sm text-green-800",children:p})]})]}),e.jsxs("div",{className:"mx-auto max-w-7xl space-y-8 px-4 py-12 sm:px-6 lg:px-8",children:[e.jsxs("section",{id:"career-intent",className:"relative",children:[e.jsx("div",{className:"absolute right-0 -top-6 sm:-top-8",children:e.jsxs("button",{onClick:G,className:"inline-flex items-center gap-2 rounded-full border-2 border-primary bg-white px-4 py-2 text-sm font-semibold text-primary shadow-lg transition-all hover:bg-primary hover:text-white","aria-label":"Export this page as PDF",children:[e.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M6 9V4h12v5M6 18H5a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-1M6 14h12v8H6v-8Z"})}),e.jsx("span",{children:"Export PDF"})]})}),e.jsx("h2",{className:"mb-4 text-2xl font-heading font-bold text-ink",children:"Personal Information"}),e.jsx(at,{value:f,onChange:j,regionOptions:ft,SelectQuestion:Tt,occupationSearch:L})]}),e.jsx("section",{id:"insight-cta",className:"mx-auto mt-10 max-w-7xl px-4 pb-16 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"rounded-3xl bg-slate-100 p-6 sm:p-8",children:[e.jsx("p",{className:" text-lg font-small leading-7 text-ink sm:text-2xl",children:"Want to see how your profile matches with market trends and opportunities?"}),e.jsx("div",{className:"mt-4",children:e.jsxs(w,{id:"go-insight",variant:"primary",size:"md",onClick:ae,disabled:!Y,tooltipWhenDisabled:"Please select a target job first","aria-label":"View Personal Data Insights",className:"inline-flex items-center gap-2 rounded-xl px-5 py-3 text-base",children:[e.jsx("span",{children:"View Personal Data Insights"}),e.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"M13 5l7 7-7 7"})]})]})})]})}),e.jsxs("section",{id:"skill-roadmap",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-heading font-bold text-ink",children:"Skill Roadmap"}),e.jsx(X,{placement:"left",openOn:"both",text:e.jsx("div",{children:e.jsxs("p",{children:["We list only ",e.jsx("strong",{children:"missing abilities"})," detected for your selected job. You can"," ",e.jsx("strong",{children:"customize"})," this list at any time."]})})})]}),e.jsxs("div",{className:"rounded-xl border border-border bg-white p-6 shadow-card",children:[e.jsx("p",{className:"mb-4 text-sm text-ink-soft",children:"Plan your skill development journey with timelines for each skill you want to acquire."}),e.jsx(it,{initialSkills:K.items},K.key)]})]}),e.jsxs("section",{id:"training-advice",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-heading font-bold text-ink",children:"Training Advice"}),e.jsx(X,{placement:"left",openOn:"both",text:"This list updates based on the target job you select."})]}),e.jsxs("div",{className:"rounded-xl border border-border bg-white p-6 shadow-card",children:[e.jsx(dt,{items:C,title:"",onRemove:b=>{const T=C.filter(P=>P.code!==b.code);t(de({occupation:m.trainingAdvice?.occupation||{code:"",title:""},courses:T.map(P=>({id:P.code,name:P.title,url:P.url}))}))}}),C.length>0&&e.jsx("div",{className:"mt-6 border-t border-border pt-6",children:e.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-blue-200 bg-blue-50 p-4",children:[e.jsx("svg",{className:"mt-0.5 h-5 w-5 shrink-0 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"mb-2 text-sm text-blue-900",children:[e.jsx("strong",{children:"Confused by course terminology?"})," Try our VET Terminology Dictionary below."]}),e.jsx("button",{onClick:()=>c.current?.scrollIntoView({behavior:"smooth",block:"start"}),className:"text-sm font-semibold text-blue-700 underline hover:text-blue-800",children:"Jump to VET Glossary"})]})]})})]})]}),e.jsxs("section",{id:"vet-terminology",ref:c,children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-heading font-bold text-ink",children:"VET Terminology"}),e.jsx(X,{placement:"left",openOn:"both",text:"Search for any VET term prefix to see suggestions. Click a term to see details."})]}),e.jsx(pt,{})]})]})]})}export{Pt as default};
