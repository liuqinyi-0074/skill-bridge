/* Component-level utilities (Tailwind v4):
   - DO NOT use `@tailwind base/components/utilities` here.
   - Keep only your layered styles (e.g., tooltips, cards, etc.).
*/

@layer components {
  /* Trigger container: positions the bubble relative to it */
  .tt-group {
    @apply relative inline-block align-middle;
  }

  /* Tooltip bubble (hidden by default; placement via modifiers below) */
  .tt-bubble {
    @apply pointer-events-none absolute z-50
           rounded px-2 py-1 text-xs bg-ink text-ink-invert shadow-card
           opacity-0 scale-95 transition will-change-transform
           max-w-[24rem] whitespace-pre-wrap text-pretty;
  }

  /* Show the bubble on mouse hover or when any child gains focus */
  .tt-group:hover .tt-bubble,
  .tt-group:focus-within .tt-bubble {
    @apply opacity-100 scale-100;
  }

  /* ---- Placements ---- */
  .tt--bottom { @apply left-1/2 -translate-x-1/2 top-full  mt-2; }
  .tt--top    { @apply left-1/2 -translate-x-1/2 bottom-full mb-2; }
  .tt--left   { @apply right-full mr-2 top-1/2 -translate-y-1/2; }
  .tt--right  { @apply left-full  ml-2 top-1/2 -translate-y-1/2; }

  /* Reduced motion preference: disable transforms */
  @media (prefers-reduced-motion: reduce) {
    .tt-bubble { @apply transition-none transform-none; }
    .tt-group:hover .tt-bubble,
    .tt-group:focus-within .tt-bubble { @apply opacity-100; }
  }
}
